<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="vi">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>vnsys | Keep calm and go ahead</title>
<link rel="pingback" href="https://vnsys.wordpress.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"google":{"families":["PT+Serif:b:latin,latin-ext,vietnamese","Noto+Serif:r,i,b,bi:latin,latin-ext,vietnamese"]}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active h1{font-weight:700;font-style:normal;font-family:"PT Serif",serif}.wf-active h1{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active body{font-size:130%;font-family:"Noto Serif",serif}.wf-active body{font-size:81.25%;font-family:"Noto Serif",serif}.wf-active .column .entry{font-size:1.56em}.wf-active .postcomments{font-size:1.521em}.wf-active .postcomments span{font-size:0.91em}.wf-active .postcomments a{font-size:1.521em}.wf-active #header .description{font-size:1.82em}.wf-active #header .rss{font-size:1.56em}.wf-active small{font-family:"Noto Serif",serif;font-size:1.43em}.wf-active .commentlist li{font-size:1.43em;font-family:"Noto Serif",serif}.wf-active .commentlist li ul li{font-size:1.3em}.wf-active .commentlist cite{font-size:14.3px}.wf-active .commentlist cite a{font-size:14.3px}.wf-active #commentform p{font-family:"Noto Serif",serif;font-size:1.43em}.wf-active #sidebar{font-size:1.43em;font-family:"Noto Serif",serif}.wf-active .form-message{font-size:1.56em}.wf-active #comments{font-size:2.925em;font-family:"Noto Serif",serif}.wf-active .menu-header a{font-size:1.56em}.wf-active #respond h3 small a{font-size:0.975em}.wf-active #respond p{font-size:130%}.wf-active #respond p label{font-size:1.56em;font-family:"Noto Serif",serif}.wf-active .nocomments{font-size:1.56em}.wf-active #footer .widget-area ul ul li{font-size:1.43em}.wf-active #footer-bott{font-size:1.43em}.wf-active #wp-calendar #next a, .wf-active #wp-calendar #prev a{font-size:11.7pt}.wf-active #wp-calendar caption{font-size:1.56em;font-family:"Noto Serif",serif}.wf-active .postmetadata{font-size:14.3px}.wf-active .navigation-bott{font-size:1.56em}.wf-active .wp-caption p.wp-caption-text{font-size:14.3px}.wf-active h2{font-family:"PT Serif",serif;font-weight:700;font-style:normal}.wf-active h2, .wf-active h2 a, .wf-active h2 a:visited, .wf-active h3, .wf-active h3 a, .wf-active h3 a:visited{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active h3{font-style:normal;font-weight:700}.wf-active h4{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active h5{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active h6{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active .fourofour{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active h2.archivetitle{font-style:normal;font-weight:700}.wf-active #sidebar h2{font-family:"PT Serif",serif;font-weight:700;font-style:normal}.wf-active #sidebar h2 a{font-family:"PT Serif",serif;font-style:normal;font-weight:700}.wf-active #sidebar h3{font-family:"PT Serif",serif;font-weight:700;font-style:normal}.wf-active #respond h3{font-weight:700;font-style:normal}.wf-active #wp-calendar th{font-style:normal;font-weight:700}.wf-active th{font-weight:700;font-style:normal}</style>
<meta name="google-site-verification" content="q7dLPCNaDy9yVGLV8E-FYtYCurpLmMI_5LYlSKHBotM" />
<meta name="msvalidate.01" content="E8B69012CF52A674891DBDCA2211AFAB" />
<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s.pubmine.com' />
<link rel='dns-prefetch' href='//x.bidswitch.net' />
<link rel='dns-prefetch' href='//static.criteo.net' />
<link rel='dns-prefetch' href='//ib.adnxs.com' />
<link rel='dns-prefetch' href='//aax.amazon-adsystem.com' />
<link rel='dns-prefetch' href='//bidder.criteo.com' />
<link rel='dns-prefetch' href='//cas.criteo.com' />
<link rel='dns-prefetch' href='//gum.criteo.com' />
<link rel='dns-prefetch' href='//ads.pubmatic.com' />
<link rel='dns-prefetch' href='//gads.pubmatic.com' />
<link rel='dns-prefetch' href='//tpc.googlesyndication.com' />
<link rel='dns-prefetch' href='//ad.doubleclick.net' />
<link rel='dns-prefetch' href='//googleads.g.doubleclick.net' />
<link rel='dns-prefetch' href='//www.googletagservices.com' />
<link rel='dns-prefetch' href='//cdn.switchadhub.com' />
<link rel='dns-prefetch' href='//delivery.g.switchadhub.com' />
<link rel='dns-prefetch' href='//delivery.swid.switchadhub.com' />
<link rel='dns-prefetch' href='//a.teads.tv' />
<link rel='dns-prefetch' href='//prebid.media.net' />
<link rel='dns-prefetch' href='//adserver-us.adtech.advertising.com' />
<link rel='dns-prefetch' href='//fastlane.rubiconproject.com' />
<link rel='dns-prefetch' href='//prebid-server.rubiconproject.com' />
<link rel='dns-prefetch' href='//hb-api.omnitagjs.com' />
<link rel='dns-prefetch' href='//mtrx.go.sonobi.com' />
<link rel='dns-prefetch' href='//apex.go.sonobi.com' />
<link rel='dns-prefetch' href='//u.openx.net' />
<link rel="alternate" type="application/rss+xml" title="Dòng thông tin vnsys &raquo;" href="https://vnsys.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Dòng phản hồi vnsys &raquo;" href="https://vnsys.wordpress.com/comments/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s0.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1573557586h&ver=5.3.2"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s0.wp.com/_static/??-eJydU9FuwyAM/KERt5Oqdg/TvoUEl3k1EIFplH39SGm3bF2zqS8RNnfnIxww9KoLXtALuKx6zpZ8gqHvglPJEeP4o2q6lB5gRms52C9iiEabBJZDq/mf2IjjOxp1fLzCzywxHTDBG0qvu4M6VUtw8nvyJOPn4gp8QdpcyhajLTsRYdusmxW0mdhMdk+z2qjjCElGxn/InFhfVvFYYAWevZgw+HtlWI8hi7KRzL0SUQt5m+6lCzlk8vgHf5+ZVSJBhYamgec7gVWz3jWP5wyEJKkOAENJ4Eg43JTswtnKepJYVUZtNdXM6b7utlTdcFGdW/rZXYrbFJ3Sd72WCeHKHI2MrsCWaPVltW0fMSVVvo6yU/JaiNfprm3oc3t5MjduYj6AjEVJgLnshgNhydEAgq5nLXgrCr8IpNCR5nowRQX4jUvgg9TuZbEkajGo8kdLHIP/Vqg9a4pL1IhTfsrSQkHNyon04p7Xm+32abN72u3ePgAgz9Ps?cssminify=yes' type='text/css' media='all' />
<style id='wp-block-library-inline-css'>
.has-text-align-justify {
	text-align:justify;
}
</style>
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??-eJx9jtEOgjAMRX/IUTESxoPxW8Yco1pWQkuMf+9MIGJIfGqbnHt74Dkaz0lDUhhmM9IcMQk4r8ipddN3K7zIATb4ynYzkRHUYMINFVNcWuBYlLY4QSRuXSb0RUFA1Cl6aMmlx65yYzCyqOnI4QTSuynXrvNfSthj/kUc+ffYhbQPQ9bpz4vfB7gOl7Kq66ayjbX3N8C0aCc=?cssminify=yes' type='text/css' media='all' />
<style id='jetpack-global-styles-frontend-style-inline-css'>
:root { --font-headings: unset; --font-base: unset; --font-headings-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; --font-base-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;}
</style>
<script type='text/javascript' src='https://s2.wp.com/_static/??-eJyF0FEKwjAMBuAL2RUZHb6IZ6k1jtQ1rU26oae3wkSEqhDIQz7In+glKSQ3lROw9rWuBfJtbZ3njf4FVMAxW4EuIL2wiyRA8rQpsgRgtiM0piEecQJVGHIFJHXNOTbcZySkGWH5yzxIsu6iMjDeoXUIp3fm7x9Y1SHst8bsejMMpvcPs7tzAg=='></script>
<link rel='stylesheet' id='all-css-0-2' href='https://s0.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1530132353h&cssminify=yes' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://vnsys.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress.com" />
<link rel='shortlink' href='https://wp.me/6d3ba' />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="vnsys" />
<meta property="og:description" content="Keep calm and go ahead" />
<meta property="og:url" content="https://vnsys.wordpress.com/" />
<meta property="og:site_name" content="vnsys" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/9c3a09732d629d2efd20646cb34ed1ce?s=200&amp;ts=1578370195" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="vi_VN" />
<meta name="twitter:creator" content="@Nguyenvodung" />
<meta name="twitter:site" content="@Nguyenvodung" />
<meta property="fb:app_id" content="249643311490" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/9c3a09732d629d2efd20646cb34ed1ce?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/9c3a09732d629d2efd20646cb34ed1ce?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/9c3a09732d629d2efd20646cb34ed1ce?s=114" />
<link rel='openid.server' href='https://vnsys.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://vnsys.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://vnsys.wordpress.com/osd.xml" title="vnsys" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
				<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<meta name="application-name" content="vnsys" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Keep calm and go ahead" /><meta name="msapplication-task" content="name=Theo dõi;action-uri=https://vnsys.wordpress.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/9c3a09732d629d2efd20646cb34ed1ce?s=16" /><meta name="msapplication-task" content="name=Đăng ký một blog miễn phí;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Hỗ trợ của WordPress.com;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Diễn đàn của WordPress.com;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="Keep calm and go ahead" />
		<script type="text/javascript">

			window.doNotSellCallback = function( $ ) {

				var linkElements = [
					'a[href="https://wordpress.com/?ref=footer_blog"]',
					'a[href="https://wordpress.com/?ref=footer_website"]',
					'a[href="https://wordpress.com/?ref=vertical_footer"]',
					'a[href^="https://wordpress.com/?ref=footer_segment_"]',
				].join(',');

				var dnsLink = $( '<a href="https://wordpress.com/advertising-program-optout" rel="nofollow" style="margin-left: 0.5em;">Do Not Sell My Personal Information</a>' );
				var creditLinks = $( linkElements );

				if ( 0 === creditLinks.length ) {
					return false;
				}

				creditLinks.after(dnsLink);
				return true;
			};
		</script>
				<script type="text/javascript">
		function __ATA_CC() {var v = document.cookie.match('(^|;) ?personalized-ads-consent=([^;]*)(;|$)');return v ? 1 : 0;}
		var __ATA_PP = { pt: 0, ht: 0, tn: 'greyzed', amp: false, siteid: 8982, blogid: 91768504, consent: __ATA_CC() };
		var __ATA = __ATA || {};
		__ATA.cmd = __ATA.cmd || [];
		__ATA.criteo = __ATA.criteo || {};
		__ATA.criteo.cmd = __ATA.criteo.cmd || [];
		</script>
		<script type="text/javascript">
		(function(){var g=Date.now||function(){return+new Date};function h(a,b){a:{for(var c=a.length,d="string"==typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]};function k(a,b,c){c=null!=c?"="+encodeURIComponent(String(c)):"";if(b+=c){c=a.indexOf("#");0>c&&(c=a.length);var d=a.indexOf("?");if(0>d||d>c){d=c;var e=""}else e=a.substring(d+1,c);a=[a.substr(0,d),e,a.substr(c)];c=a[1];a[1]=b?c?c+"&"+b:b:c;a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a};var l=0;function m(a,b){var c=document.createElement("script");c.src=a;c.onload=function(){b&&b(void 0)};c.onerror=function(){b("error")};a=document.getElementsByTagName("head");var d;a&&0!==a.length?d=a[0]:d=document.documentElement;d.appendChild(c)}function n(a){var b=void 0===b?document.cookie:b;return(b=h(b.split("; "),function(c){return-1!=c.indexOf(a+"=")}))?b.split("=")[1]:""}function p(a){return"string"==typeof a&&0<a.length}
		function r(a,b,c){b=void 0===b?"":b;c=void 0===c?".":c;var d=[];Object.keys(a).forEach(function(e){var f=a[e],q=typeof f;"object"==q&&null!=f||"function"==q?d.push(r(f,b+e+c)):null!==f&&void 0!==f&&(e=encodeURIComponent(b+e),d.push(e+"="+encodeURIComponent(f)))});return d.filter(p).join("&")}function t(a,b){a||((window.__ATA||{}).config=b.c,m(b.url))}var u=Math.floor(1E13*Math.random()),v=window.__ATA||{};window.__ATA=v;v.rid=u;v.createdAt=g();var w=window.__ATA||{},x="s.pubmine.com";
		w&&w.serverDomain&&(x=w.serverDomain);var y="//"+x+"/conf",z=window.top===window,A=window.__ATA_PP&&window.__ATA_PP.gdpr_applies,B="boolean"===typeof A?Number(A):null,C=window.__ATA_PP||null,D=z?document.referrer?document.referrer:null:null,E=z?null:document.referrer?document.referrer:null,F,G=n("__ATA_tuuid");F=G?G:null;var H=window.innerWidth+"x"+window.innerHeight,I=n("usprivacy"),J=r({gdpr:B,pp:C,rid:u,src:D,ref:E,tuuid:F,vp:H,us_privacy:I?I:null},"",".");
		(function(a){var b=void 0===b?"cb":b;l++;var c="callback__"+g().toString(36)+"_"+l.toString(36);a=k(a,b,c);window[c]=function(d){t(void 0,d)};m(a,function(d){d&&t(d)})})(y+"?"+J);}).call(this);
		</script><script type="text/javascript">
	window.google_analytics_uacct = "UA-52447-2";
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_gat._anonymizeIp']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script>
</head>

<body class="home blog customizer-styles-applied highlander-enabled highlander-light infinite-scroll">
<div id="wrapper">

<div id="page">
		<div class="menu-header"><ul id="menu-menu-1" class="menu"><li id="menu-item-301" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-301"><a href="https://vnsys.wordpress.com/" aria-current="page">Home</a></li>
<li id="menu-item-5" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5"><a href="https://vnsys.wordpress.com/about/">About</a></li>
<li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9"><a title="Nginx, Apache, WebLogic" href="https://vnsys.wordpress.com/category/web-server/">WebServer</a></li>
<li id="menu-item-300" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-300"><a title="Load Balancing, High Available" href="https://vnsys.wordpress.com/category/load-balancing/">LB-HA</a></li>
<li id="menu-item-11" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-11"><a title="Hacking, Security" href="https://vnsys.wordpress.com/category/security/">Hack-Security</a></li>
<li id="menu-item-4" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4"><a title="Linux" href="https://vnsys.wordpress.com/category/linux/">Linux</a></li>
<li id="menu-item-1219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1219"><a title="MongoDB, Oracle, MySQL, SQLite" href="https://vnsys.wordpress.com/category/database/">DB</a></li>
<li id="menu-item-1576" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1576"><a title="Continuous Integration, Continuous Delivery, Jenkins, Docker" href="https://vnsys.wordpress.com/category/cicd/">CICD</a></li>
<li id="menu-item-1577" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1577"><a title="Docker, Docker Compose, Container" href="https://vnsys.wordpress.com/category/docker/">Docker</a></li>
</ul></div>
	<div id="header" role="banner">
		<h1><a href="https://vnsys.wordpress.com/">vnsys</a></h1>

		<div class="description">Keep calm and go ahead</div>

		<div class="rss">
			<a href="https://vnsys.wordpress.com/feed/" title="RSS">Stay updated via RSS</a>		</div>
	</div>

	<hr />
<div id="container">

	<div id="sidebar" role="complementary">
		
		<!-- begin widgetized sidebar 1 -->
		<ul>
			<li id="search-8" class="widget widget_search"><div class="search-box">
	<form method="get" action="https://vnsys.wordpress.com/">
	<input type="text" size="15" class="search-field" name="s" id="s" value="search this site" onfocus="if(this.value == 'search this site') {this.value = '';}" onblur="if (this.value == '') {this.value = 'search this site';}"/><input type="submit"  value="" class="search-go" />
	</form>
</div></li><li id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widgettitle">Mây chuyên mục</h2><div style="overflow: hidden;"><a href="https://vnsys.wordpress.com/category/apache/" style="font-size: 258.33333333333%; padding: 1px; margin: 1px;"  title="Apache (21)">Apache</a> <a href="https://vnsys.wordpress.com/category/backup/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="Backup (2)">Backup</a> <a href="https://vnsys.wordpress.com/category/caching/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="Caching (2)">Caching</a> <a href="https://vnsys.wordpress.com/category/cicd/" style="font-size: 141.66666666667%; padding: 1px; margin: 1px;"  title="CICD (7)">CICD</a> <a href="https://vnsys.wordpress.com/category/cm/" style="font-size: 116.66666666667%; padding: 1px; margin: 1px;"  title="CM (4)">CM</a> <a href="https://vnsys.wordpress.com/category/container/" style="font-size: 116.66666666667%; padding: 1px; margin: 1px;"  title="Container (4)">Container</a> <a href="https://vnsys.wordpress.com/category/control-panel/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="Control Panel (2)">Control Panel</a> <a href="https://vnsys.wordpress.com/category/database/" style="font-size: 150%; padding: 1px; margin: 1px;"  title="Database (8)">Database</a> <a href="https://vnsys.wordpress.com/category/docker/" style="font-size: 125%; padding: 1px; margin: 1px;"  title="Docker (5)">Docker</a> <a href="https://vnsys.wordpress.com/category/haproxy/" style="font-size: 116.66666666667%; padding: 1px; margin: 1px;"  title="HAProxy (4)">HAProxy</a> <a href="https://vnsys.wordpress.com/category/ispconfig/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="ISPConfig (2)">ISPConfig</a> <a href="https://vnsys.wordpress.com/category/linh-tinh/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="Linh tinh (2)">Linh tinh</a> <a href="https://vnsys.wordpress.com/category/linux/" style="font-size: 250%; padding: 1px; margin: 1px;"  title="Linux (20)">Linux</a> <a href="https://vnsys.wordpress.com/category/load-balancing/" style="font-size: 141.66666666667%; padding: 1px; margin: 1px;"  title="Load Balancing (7)">Load Balancing</a> <a href="https://vnsys.wordpress.com/category/mail-server/" style="font-size: 108.33333333333%; padding: 1px; margin: 1px;"  title="Mail Server (3)">Mail Server</a> <a href="https://vnsys.wordpress.com/category/mongodb/" style="font-size: 116.66666666667%; padding: 1px; margin: 1px;"  title="MongoDB (4)">MongoDB</a> <a href="https://vnsys.wordpress.com/category/monitor/" style="font-size: 116.66666666667%; padding: 1px; margin: 1px;"  title="Monitor (4)">Monitor</a> <a href="https://vnsys.wordpress.com/category/network/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="Network (2)">Network</a> <a href="https://vnsys.wordpress.com/category/nginx/" style="font-size: 141.66666666667%; padding: 1px; margin: 1px;"  title="Nginx (7)">Nginx</a> <a href="https://vnsys.wordpress.com/category/oracle/" style="font-size: 108.33333333333%; padding: 1px; margin: 1px;"  title="Oracle (3)">Oracle</a> <a href="https://vnsys.wordpress.com/category/pbx/" style="font-size: 108.33333333333%; padding: 1px; margin: 1px;"  title="pbx (3)">pbx</a> <a href="https://vnsys.wordpress.com/category/redis/" style="font-size: 108.33333333333%; padding: 1px; margin: 1px;"  title="Redis (3)">Redis</a> <a href="https://vnsys.wordpress.com/category/security/" style="font-size: 233.33333333333%; padding: 1px; margin: 1px;"  title="Security (18)">Security</a> <a href="https://vnsys.wordpress.com/category/streaming/" style="font-size: 108.33333333333%; padding: 1px; margin: 1px;"  title="streaming (3)">streaming</a> <a href="https://vnsys.wordpress.com/category/virtualmachine/" style="font-size: 100%; padding: 1px; margin: 1px;"  title="VirtualMachine (2)">VirtualMachine</a> <a href="https://vnsys.wordpress.com/category/web-server/" style="font-size: 275%; padding: 1px; margin: 1px;"  title="Web Server (23)">Web Server</a> </div></li>		<li id="recent-posts-4" class="widget widget_recent_entries">		<h2 class="widgettitle">Bài viết mới</h2>		<ul>
											<li>
					<a href="https://vnsys.wordpress.com/2020/01/05/monitoring-network-voi-prometheus-grafana/">Monitoring network với prometheus +&nbsp;grafana</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/11/03/redis-cluster-voi-nhieu-master-node/">Redis cluster với nhiều master&nbsp;node</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/10/31/ve-nginx-caching/">Về nginx caching</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/">Triển khai hệ thống&nbsp;Mongo-Shake</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/">Thiết lập GSM gateway và&nbsp;FreePBX</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/03/16/thiet-lap-tong-dai-voip-voi-freepbx-distro/">Thiết lập tổng đài VoIP với FreePBX&nbsp;Distro</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/03/16/gioi-thieu-ve-asterisk-freepbx-gsm-gateway/">Giới thiệu về Asterisk + FreePBX + GSM&nbsp;Gateway</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/02/28/streaming-media-voi-nginx-va-nginx-rtmp-module/">Streaming Media với Nginx và nginx-rtmp&nbsp;module</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/02/28/streaming-media-la-gi/">Streaming media là&nbsp;gì?</a>
									</li>
											<li>
					<a href="https://vnsys.wordpress.com/2019/02/28/cai-dat-ffmpeg-tu-source-tren-linux/">Cài đặt FFmpeg từ source trên&nbsp;Linux</a>
									</li>
					</ul>
		</li><li id="wp_tag_cloud-2" class="widget wp_widget_tag_cloud"><h2 class="widgettitle">Thẻ</h2><div style="overflow:hidden"><a href="https://vnsys.wordpress.com/tag/ansible/" class="tag-cloud-link tag-link-4011177 tag-link-position-1" style="font-size: 14.222222222222pt;" aria-label="Ansible (4 mục)">Ansible</a>
<a href="https://vnsys.wordpress.com/tag/apache/" class="tag-cloud-link tag-link-3768 tag-link-position-2" style="font-size: 18.111111111111pt;" aria-label="Apache (8 mục)">Apache</a>
<a href="https://vnsys.wordpress.com/tag/asterisk/" class="tag-cloud-link tag-link-25809 tag-link-position-3" style="font-size: 12.666666666667pt;" aria-label="Asterisk (3 mục)">Asterisk</a>
<a href="https://vnsys.wordpress.com/tag/cm/" class="tag-cloud-link tag-link-163900 tag-link-position-4" style="font-size: 12.666666666667pt;" aria-label="CM (3 mục)">CM</a>
<a href="https://vnsys.wordpress.com/tag/container/" class="tag-cloud-link tag-link-242358 tag-link-position-5" style="font-size: 10.8pt;" aria-label="Container (2 mục)">Container</a>
<a href="https://vnsys.wordpress.com/tag/database/" class="tag-cloud-link tag-link-475 tag-link-position-6" style="font-size: 14.222222222222pt;" aria-label="Database (4 mục)">Database</a>
<a href="https://vnsys.wordpress.com/tag/docker/" class="tag-cloud-link tag-link-4504191 tag-link-position-7" style="font-size: 15.466666666667pt;" aria-label="Docker (5 mục)">Docker</a>
<a href="https://vnsys.wordpress.com/tag/docker-compose/" class="tag-cloud-link tag-link-308799219 tag-link-position-8" style="font-size: 10.8pt;" aria-label="Docker-Compose (2 mục)">Docker-Compose</a>
<a href="https://vnsys.wordpress.com/tag/docker-swarm/" class="tag-cloud-link tag-link-308799222 tag-link-position-9" style="font-size: 10.8pt;" aria-label="Docker-swarm (2 mục)">Docker-swarm</a>
<a href="https://vnsys.wordpress.com/tag/freepbx/" class="tag-cloud-link tag-link-1116184 tag-link-position-10" style="font-size: 12.666666666667pt;" aria-label="FreePBX (3 mục)">FreePBX</a>
<a href="https://vnsys.wordpress.com/tag/gitlab/" class="tag-cloud-link tag-link-77180337 tag-link-position-11" style="font-size: 14.222222222222pt;" aria-label="GitLab (4 mục)">GitLab</a>
<a href="https://vnsys.wordpress.com/tag/grafana/" class="tag-cloud-link tag-link-223796770 tag-link-position-12" style="font-size: 8pt;" aria-label="grafana (1 mục)">grafana</a>
<a href="https://vnsys.wordpress.com/tag/gsm-gateway/" class="tag-cloud-link tag-link-25430376 tag-link-position-13" style="font-size: 10.8pt;" aria-label="GSM-gateway (2 mục)">GSM-gateway</a>
<a href="https://vnsys.wordpress.com/tag/ha/" class="tag-cloud-link tag-link-41544 tag-link-position-14" style="font-size: 14.222222222222pt;" aria-label="HA (4 mục)">HA</a>
<a href="https://vnsys.wordpress.com/tag/haproxy/" class="tag-cloud-link tag-link-6987670 tag-link-position-15" style="font-size: 14.222222222222pt;" aria-label="HAProxy (4 mục)">HAProxy</a>
<a href="https://vnsys.wordpress.com/tag/ip-pbx/" class="tag-cloud-link tag-link-103841 tag-link-position-16" style="font-size: 12.666666666667pt;" aria-label="IP-PBX (3 mục)">IP-PBX</a>
<a href="https://vnsys.wordpress.com/tag/ivr/" class="tag-cloud-link tag-link-32531 tag-link-position-17" style="font-size: 8pt;" aria-label="IVR (1 mục)">IVR</a>
<a href="https://vnsys.wordpress.com/tag/jenkins/" class="tag-cloud-link tag-link-351789 tag-link-position-18" style="font-size: 16.555555555556pt;" aria-label="Jenkins (6 mục)">Jenkins</a>
<a href="https://vnsys.wordpress.com/tag/jenkinsfile/" class="tag-cloud-link tag-link-434439981 tag-link-position-19" style="font-size: 8pt;" aria-label="Jenkinsfile (1 mục)">Jenkinsfile</a>
<a href="https://vnsys.wordpress.com/tag/keepalived/" class="tag-cloud-link tag-link-2832706 tag-link-position-20" style="font-size: 8pt;" aria-label="KeepAlived (1 mục)">KeepAlived</a>
<a href="https://vnsys.wordpress.com/tag/laravel/" class="tag-cloud-link tag-link-86504237 tag-link-position-21" style="font-size: 8pt;" aria-label="Laravel (1 mục)">Laravel</a>
<a href="https://vnsys.wordpress.com/tag/linux/" class="tag-cloud-link tag-link-610 tag-link-position-22" style="font-size: 18.111111111111pt;" aria-label="Linux (8 mục)">Linux</a>
<a href="https://vnsys.wordpress.com/tag/loadbalancing/" class="tag-cloud-link tag-link-5256089 tag-link-position-23" style="font-size: 12.666666666667pt;" aria-label="LoadBalancing (3 mục)">LoadBalancing</a>
<a href="https://vnsys.wordpress.com/tag/mongo-shake/" class="tag-cloud-link tag-link-677295567 tag-link-position-24" style="font-size: 8pt;" aria-label="Mongo-Shake (1 mục)">Mongo-Shake</a>
<a href="https://vnsys.wordpress.com/tag/mongodb/" class="tag-cloud-link tag-link-21954763 tag-link-position-25" style="font-size: 14.222222222222pt;" aria-label="MongoDB (4 mục)">MongoDB</a>
<a href="https://vnsys.wordpress.com/tag/monitor/" class="tag-cloud-link tag-link-32519 tag-link-position-26" style="font-size: 14.222222222222pt;" aria-label="Monitor (4 mục)">Monitor</a>
<a href="https://vnsys.wordpress.com/tag/multibranch-pipeline/" class="tag-cloud-link tag-link-644832931 tag-link-position-27" style="font-size: 10.8pt;" aria-label="Multibranch-Pipeline (2 mục)">Multibranch-Pipeline</a>
<a href="https://vnsys.wordpress.com/tag/nagios/" class="tag-cloud-link tag-link-167993 tag-link-position-28" style="font-size: 12.666666666667pt;" aria-label="nagios (3 mục)">nagios</a>
<a href="https://vnsys.wordpress.com/tag/network/" class="tag-cloud-link tag-link-3385 tag-link-position-29" style="font-size: 10.8pt;" aria-label="Network (2 mục)">Network</a>
<a href="https://vnsys.wordpress.com/tag/nginx/" class="tag-cloud-link tag-link-697649 tag-link-position-30" style="font-size: 19.511111111111pt;" aria-label="Nginx (10 mục)">Nginx</a>
<a href="https://vnsys.wordpress.com/tag/oracle/" class="tag-cloud-link tag-link-3766 tag-link-position-31" style="font-size: 12.666666666667pt;" aria-label="Oracle (3 mục)">Oracle</a>
<a href="https://vnsys.wordpress.com/tag/php-fpm/" class="tag-cloud-link tag-link-4540215 tag-link-position-32" style="font-size: 8pt;" aria-label="PHP-FPM (1 mục)">PHP-FPM</a>
<a href="https://vnsys.wordpress.com/tag/pipeline/" class="tag-cloud-link tag-link-34463 tag-link-position-33" style="font-size: 10.8pt;" aria-label="Pipeline (2 mục)">Pipeline</a>
<a href="https://vnsys.wordpress.com/tag/prometheus/" class="tag-cloud-link tag-link-2788 tag-link-position-34" style="font-size: 8pt;" aria-label="prometheus (1 mục)">prometheus</a>
<a href="https://vnsys.wordpress.com/tag/raid/" class="tag-cloud-link tag-link-65336 tag-link-position-35" style="font-size: 8pt;" aria-label="Raid (1 mục)">Raid</a>
<a href="https://vnsys.wordpress.com/tag/redis/" class="tag-cloud-link tag-link-5307557 tag-link-position-36" style="font-size: 12.666666666667pt;" aria-label="Redis (3 mục)">Redis</a>
<a href="https://vnsys.wordpress.com/tag/reverse-proxy/" class="tag-cloud-link tag-link-1742193 tag-link-position-37" style="font-size: 10.8pt;" aria-label="Reverse proxy (2 mục)">Reverse proxy</a>
<a href="https://vnsys.wordpress.com/tag/security/" class="tag-cloud-link tag-link-801 tag-link-position-38" style="font-size: 15.466666666667pt;" aria-label="Security (5 mục)">Security</a>
<a href="https://vnsys.wordpress.com/tag/sentinel/" class="tag-cloud-link tag-link-143462 tag-link-position-39" style="font-size: 10.8pt;" aria-label="sentinel (2 mục)">sentinel</a>
<a href="https://vnsys.wordpress.com/tag/session/" class="tag-cloud-link tag-link-54038 tag-link-position-40" style="font-size: 10.8pt;" aria-label="Session (2 mục)">Session</a>
<a href="https://vnsys.wordpress.com/tag/ssh/" class="tag-cloud-link tag-link-49320 tag-link-position-41" style="font-size: 12.666666666667pt;" aria-label="SSH (3 mục)">SSH</a>
<a href="https://vnsys.wordpress.com/tag/telegram/" class="tag-cloud-link tag-link-430390 tag-link-position-42" style="font-size: 8pt;" aria-label="Telegram (1 mục)">Telegram</a>
<a href="https://vnsys.wordpress.com/tag/vagrant/" class="tag-cloud-link tag-link-666241 tag-link-position-43" style="font-size: 10.8pt;" aria-label="Vagrant (2 mục)">Vagrant</a>
<a href="https://vnsys.wordpress.com/tag/virtualbox/" class="tag-cloud-link tag-link-989685 tag-link-position-44" style="font-size: 10.8pt;" aria-label="VirtualBox (2 mục)">VirtualBox</a>
<a href="https://vnsys.wordpress.com/tag/voip/" class="tag-cloud-link tag-link-811 tag-link-position-45" style="font-size: 12.666666666667pt;" aria-label="VoIP (3 mục)">VoIP</a>
<a href="https://vnsys.wordpress.com/tag/webhooks/" class="tag-cloud-link tag-link-16146152 tag-link-position-46" style="font-size: 8pt;" aria-label="WebHooks (1 mục)">WebHooks</a>
<a href="https://vnsys.wordpress.com/tag/weblogic/" class="tag-cloud-link tag-link-4476 tag-link-position-47" style="font-size: 8pt;" aria-label="weblogic (1 mục)">weblogic</a>
<a href="https://vnsys.wordpress.com/tag/web-server/" class="tag-cloud-link tag-link-214484 tag-link-position-48" style="font-size: 22pt;" aria-label="Web Server (15 mục)">Web Server</a></div></li><li id="categories-7" class="widget widget_categories"><h2 class="widgettitle">Chuyên mục</h2>		<ul>
				<li class="cat-item cat-item-3768"><a href="https://vnsys.wordpress.com/category/apache/" title="Apache">Apache</a> (21)
</li>
	<li class="cat-item cat-item-5469"><a href="https://vnsys.wordpress.com/category/backup/">Backup</a> (2)
</li>
	<li class="cat-item cat-item-81121"><a href="https://vnsys.wordpress.com/category/caching/">Caching</a> (2)
</li>
	<li class="cat-item cat-item-4605929"><a href="https://vnsys.wordpress.com/category/cicd/">CICD</a> (7)
</li>
	<li class="cat-item cat-item-163900"><a href="https://vnsys.wordpress.com/category/cm/">CM</a> (4)
</li>
	<li class="cat-item cat-item-242358"><a href="https://vnsys.wordpress.com/category/container/">Container</a> (4)
</li>
	<li class="cat-item cat-item-16201"><a href="https://vnsys.wordpress.com/category/control-panel/">Control Panel</a> (2)
</li>
	<li class="cat-item cat-item-475"><a href="https://vnsys.wordpress.com/category/database/">Database</a> (8)
</li>
	<li class="cat-item cat-item-4504191"><a href="https://vnsys.wordpress.com/category/docker/">Docker</a> (5)
</li>
	<li class="cat-item cat-item-6987670"><a href="https://vnsys.wordpress.com/category/haproxy/">HAProxy</a> (4)
</li>
	<li class="cat-item cat-item-248924"><a href="https://vnsys.wordpress.com/category/ispconfig/">ISPConfig</a> (2)
</li>
	<li class="cat-item cat-item-23445"><a href="https://vnsys.wordpress.com/category/linh-tinh/">Linh tinh</a> (2)
</li>
	<li class="cat-item cat-item-610"><a href="https://vnsys.wordpress.com/category/linux/">Linux</a> (20)
</li>
	<li class="cat-item cat-item-310703"><a href="https://vnsys.wordpress.com/category/load-balancing/">Load Balancing</a> (7)
</li>
	<li class="cat-item cat-item-313999"><a href="https://vnsys.wordpress.com/category/mail-server/">Mail Server</a> (3)
</li>
	<li class="cat-item cat-item-21954763"><a href="https://vnsys.wordpress.com/category/mongodb/">MongoDB</a> (4)
</li>
	<li class="cat-item cat-item-32519"><a href="https://vnsys.wordpress.com/category/monitor/">Monitor</a> (4)
</li>
	<li class="cat-item cat-item-3385"><a href="https://vnsys.wordpress.com/category/network/">Network</a> (2)
</li>
	<li class="cat-item cat-item-697649"><a href="https://vnsys.wordpress.com/category/nginx/">Nginx</a> (7)
</li>
	<li class="cat-item cat-item-3766"><a href="https://vnsys.wordpress.com/category/oracle/">Oracle</a> (3)
</li>
	<li class="cat-item cat-item-26034"><a href="https://vnsys.wordpress.com/category/pbx/">pbx</a> (3)
</li>
	<li class="cat-item cat-item-5307557"><a href="https://vnsys.wordpress.com/category/redis/">Redis</a> (3)
</li>
	<li class="cat-item cat-item-801"><a href="https://vnsys.wordpress.com/category/security/">Security</a> (18)
</li>
	<li class="cat-item cat-item-45141"><a href="https://vnsys.wordpress.com/category/streaming/">streaming</a> (3)
</li>
	<li class="cat-item cat-item-4744884"><a href="https://vnsys.wordpress.com/category/virtualmachine/">VirtualMachine</a> (2)
</li>
	<li class="cat-item cat-item-214484"><a href="https://vnsys.wordpress.com/category/web-server/">Web Server</a> (23)
</li>
		</ul>
			</li><li id="wpcom_social_media_icons_widget-5" class="widget widget_wpcom_social_media_icons_widget"><h2 class="widgettitle">Mạng xã hội</h2><ul><li><a href="https://twitter.com/nguyenvodung/" class="genericon genericon-twitter" target="_blank"><span class="screen-reader-text">View nguyenvodung&#8217;s profile on Twitter</span></a></li><li><a href="https://www.linkedin.com/in/keepwalking86/" class="genericon genericon-linkedin" target="_blank"><span class="screen-reader-text">View keepwalking86&#8217;s profile on LinkedIn</span></a></li><li><a href="https://github.com/keepwalking86/" class="genericon genericon-github" target="_blank"><span class="screen-reader-text">View keepwalking86&#8217;s profile on GitHub</span></a></li></ul></li>			<div id="atatags-286348-5e140493c118d"></div>
			
			<script>
				__ATA.cmd.push(function() {
					__ATA.initDynamicSlot({
						id: 'atatags-286348-5e140493c118d',
						location: 140,
						formFactor: '003',   
						label: {
							text: 'Advertisements',
						},
						creative: {
							reportAd: {
								text: 'Report this ad',
							},
							privacySettings: {
								text: 'Privacy settings',
							}
						}
					});
				});
			</script>		</ul>
		<!-- end widgetized sidebar 1 -->

	</div>



	<div id="content" role="main">
		<div id="content-inner" class="column">

		
		
			
				
				<div class="post-1835 post type-post status-publish format-standard hentry category-monitor tag-grafana tag-monitor tag-prometheus" id="post-1835">
<div class="posttitle">
	<h2 class="pagetitle"><a href="https://vnsys.wordpress.com/2020/01/05/monitoring-network-voi-prometheus-grafana/" rel="bookmark" title="Permanent Link to Monitoring network với prometheus +&nbsp;grafana">Monitoring network với prometheus +&nbsp;grafana</a></h2>
	<small>
		Posted: Tháng Một 5, 2020 in <a href="https://vnsys.wordpress.com/category/monitor/" rel="category tag">Monitor</a>		<br />
		Thẻ:<a href="https://vnsys.wordpress.com/tag/grafana/" rel="tag">grafana</a>, <a href="https://vnsys.wordpress.com/tag/monitor/" rel="tag">Monitor</a>, <a href="https://vnsys.wordpress.com/tag/prometheus/" rel="tag">prometheus</a>	</small>
</div>
<div class="postcomments"><a href="https://vnsys.wordpress.com/2020/01/05/monitoring-network-voi-prometheus-grafana/#respond">0</a></div>
<div class="entry">
	<p>Để giám sát thiết bị mạng, chúng ta sử dụng giao thức snmp. Cách thức để prometheus thu thập thông tin như sau:</p>
<ul>
<li>Thiết bị mạng enable giao thức snmp và chỉ định một Client được phép get thông tin (qua port 161)</p>
</li>
<li>
<p>Client (Trong trường hợp này snmp_exporter) sẽ thu thập thông tin của thiết bị mạng qua giao thức SNMP và expose mặc định các thông tin đó qua port 9116 với route metrics là /snmp</p>
</li>
<li>
<p>Prometheus scrape thông tin mà snmp_exporter sẽ expose</p>
</li>
</ul>
<p>Cấu hình để monitor thiết bị mạng như sau</p>
<h2>Trên thiết bị mạng</h2>
<p>Trên thiết bị mạng, yêu cầu enable snmp</p>
<p>Tham khảo cách enable snmp tại: <a href="https://vnsys.wordpress.com/2018/07/28/su-dung-nagios-giam-sat-switch-router/" rel="nofollow">https://vnsys.wordpress.com/2018/07/28/su-dung-nagios-giam-sat-switch-router/</a></p>
<h2>Trên Prometheus</h2>
<h3>Step1: Download và cài đặt snmp exporter</h3>
<p>Download snmp exporter tại: <a href="https://github.com/prometheus/snmp_exporter/releases" rel="nofollow">https://github.com/prometheus/snmp_exporter/releases</a></p>
<pre class="brush: plain; title: ; notranslate" title="">
cd /opt
wget https://github.com/prometheus/snmp_exporter/releases/download/v0.15.0/snmp_exporter-0.15.0.linux-amd64.tar.gz
tar zxvf snmp_exporter-0.15.0.linux-amd64.tar.gz
mv snmp_exporter-0.15.0.linux-amd64 snmp_exporter
</pre>
<h3>Step2: Run snmp_exporter as systemd</h3>
<p>Tạo tệp tin /etc/systemd/system/snmp_exporter.service như sau</p>
<pre class="brush: plain; title: ; notranslate" title="">
cat &gt;/etc/systemd/system/snmp_exporter.service&lt;&lt;EOF
[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/opt/snmp_exporter/snmp_exporter --config.file /opt/snmp_exporter/snmp.yml
[Install]
WantedBy=multi-user.target
EOF
</pre>
<p>Ở đây, snmp_exporter đọc tệp cấu hình snmp.yml mặc định chứa một số thông tin OIDs. Tùy thuộc vào yêu cầu chúng ta có thể bổ sung hoặc bỏ đi một số thông tin không cần lấy từ tệp snmp.yml. Chúng ta có thể sử dụng công cụ NetSNMP để phân tích MIBs và tạo tệp tin cấu hình snmp</p>
<p>Start snmp_exporter</p>
<pre class="brush: plain; title: ; notranslate" title="">
systemctl daemon-reload
systemctl start snmp_exporter
systemctl enable snmp_exporter
</pre>
<h3>Step3: Cấu hình prometheus</h3>
<p>Thêm nội dung sau vào tệp cấu hình /etc/prometheus/prometheus.yml để giám sát thiết bị mạng qua snmp</p>
<pre class="brush: plain; title: ; notranslate" title="">
  - job_name: &#039;snmp&#039;
    scrape_interval: 60s
    static_configs:
      - targets: [&#039;192.168.1.254&#039;]
    metrics_path: /snmp
    params:
      module: [if_mib]
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: 127.0.0.1:9116
</pre>
<p>Trong đó:</p>
<p>192.168.1.254 là địa chỉ IP của thiết bị mạng cần giám sát</p>
<p>127.0.0.1:9116 là địa chỉ snmp_exporter được cài đặt trên prometheus và expose với port 9116</p>
<p>Kiểm tra thông tin thu thập bằng curl</p>
<blockquote><p>
  [root@prometheus snmp_exporter]# curl  <a href="http://localhost:9116/snmp?target=192.168.1.254" rel="nofollow">http://localhost:9116/snmp?target=192.168.1.254</a> |more
</p></blockquote>
<pre class="brush: plain; title: ; notranslate" title="">
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0# HELP ifAdminStatus The desired state of the interface - 1.3.6.1.2.1.2.2.1.7
# TYPE ifAdminStatus gauge
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;FastEthernet0&quot;,ifIndex=&quot;14002&quot;,ifName=&quot;Fa0&quot;} 2
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/18&quot;,ifIndex=&quot;10118&quot;,ifName=&quot;Gi1/0/18&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/19&quot;,ifIndex=&quot;10119&quot;,ifName=&quot;Gi1/0/19&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/20&quot;,ifIndex=&quot;10120&quot;,ifName=&quot;Gi1/0/20&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/21&quot;,ifIndex=&quot;10121&quot;,ifName=&quot;Gi1/0/21&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/22&quot;,ifIndex=&quot;10122&quot;,ifName=&quot;Gi1/0/22&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/23&quot;,ifIndex=&quot;10123&quot;,ifName=&quot;Gi1/0/23&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/24&quot;,ifIndex=&quot;10124&quot;,ifName=&quot;Gi1/0/24&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/25&quot;,ifIndex=&quot;10125&quot;,ifName=&quot;Gi1/0/25&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/26&quot;,ifIndex=&quot;10126&quot;,ifName=&quot;Gi1/0/26&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/5&quot;,ifIndex=&quot;10105&quot;,ifName=&quot;Gi1/0/5&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/6&quot;,ifIndex=&quot;10106&quot;,ifName=&quot;Gi1/0/6&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/7&quot;,ifIndex=&quot;10107&quot;,ifName=&quot;Gi1/0/7&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/8&quot;,ifIndex=&quot;10108&quot;,ifName=&quot;Gi1/0/8&quot;} 1
ifAdminStatus{ifAlias=&quot;&quot;,ifDescr=&quot;GigabitEthernet1/0/9&quot;,ifIndex=&quot;10109&quot;,ifName=&quot;Gi1/0/9&quot;} 1
</pre>
<h2>Trên Grafana</h2>
<p>Sử dụng dashboard SNMP Interface Throughput <a href="https://grafana.com/api/dashboards/1124/revisions/4/download" rel="nofollow">https://grafana.com/api/dashboards/1124/revisions/4/download</a></p>
<p align="center">
<img src="https://raw.githubusercontent.com/keepwalking86/prometheus/master/images/monitoring-network.png" /></p>
			<div id="atatags-26942-5e140493c1da8"></div>
			
			<script>
				__ATA.cmd.push(function() {
					__ATA.initDynamicSlot({
						id: 'atatags-26942-5e140493c1da8',
						location: 120,
						formFactor: '001',   
						label: {
							text: 'Advertisements',
						},
						creative: {
							reportAd: {
								text: 'Report this ad',
							},
							privacySettings: {
								text: 'Privacy settings',
							}
						}
					});
				});
			</script><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Chia sẻ:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-1835" class="share-twitter sd-button share-icon" href="https://vnsys.wordpress.com/2020/01/05/monitoring-network-voi-prometheus-grafana/?share=twitter" target="_blank" title="Nhấn để chia sẻ trên Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-1835" class="share-facebook sd-button share-icon" href="https://vnsys.wordpress.com/2020/01/05/monitoring-network-voi-prometheus-grafana/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-telegram"><a rel="nofollow noopener noreferrer" data-shared="" class="share-telegram sd-button share-icon" href="https://vnsys.wordpress.com/2020/01/05/monitoring-network-voi-prometheus-grafana/?share=telegram" target="_blank" title="Click to share on Telegram"><span>Telegram</span></a></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-91768504-1835-5e140493c2469' data-src='//widgets.wp.com/likes/index.html?ver=20190321#blog_id=91768504&amp;post_id=1835&amp;origin=vnsys.wordpress.com&amp;obj_id=91768504-1835-5e140493c2469' data-name='like-post-frame-91768504-1835-5e140493c2469'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height: 55px;'><span class='button'><span>Số lượt thích</span></span> <span class="loading">Đang tải...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div></div>
		</div>
			
				
				<div class="post-1827 post type-post status-publish format-standard hentry category-redis tag-redis" id="post-1827">
<div class="posttitle">
	<h2 class="pagetitle"><a href="https://vnsys.wordpress.com/2019/11/03/redis-cluster-voi-nhieu-master-node/" rel="bookmark" title="Permanent Link to Redis cluster với nhiều master&nbsp;node">Redis cluster với nhiều master&nbsp;node</a></h2>
	<small>
		Posted: Tháng Mười Một 3, 2019 in <a href="https://vnsys.wordpress.com/category/redis/" rel="category tag">Redis</a>		<br />
		Thẻ:<a href="https://vnsys.wordpress.com/tag/redis/" rel="tag">Redis</a>	</small>
</div>
<div class="postcomments"><a href="https://vnsys.wordpress.com/2019/11/03/redis-cluster-voi-nhieu-master-node/#respond">0</a></div>
<div class="entry">
	<h2>About Redis</h2>
<p>Redis thường được gọi là máy chủ cấu trúc dữ liệu, có thể được sử dụng như một database, cache hoặc message broker. Nó lưu trữ dữ liệu kiểu key-value. Redis hỗ rất nhiều kiểu cấu trúc dữ liệu như Strings, Lists, Sets, Sorted Sets, Hashes, HyperLogLogs, Bitmaps</p>
<p>Cấu trúc dữ liệu được đưa vào Redis có một số thuộc tính đặc biệt sau:</p>
<ul>
<li>Redis quan tâm đến phần lưu trữ dữ liệu trên disk, ngay cả khi chúng đang thực hiện việc xử lý trong memory. Nghĩa là Redis có thể vừa xử lý nhanh thông qua memory, và cũng an toàn hơn khi data đã lưu ở trên disk.</p>
</li>
<li>
<p>Redis sử dụng ít memory hơn khi so sánh với các language khác có cùng mô hình cấu trúc dữ liệu</p>
</li>
<li>
<p>Redis cung cấp đầy đủ các tính năng như replication, cluster, high available</p>
</li>
</ul>
<h2>About Redis Cluster</h2>
<p>Redis cluster cung cấp cách thức cài đặt redis mà dữ liệu tự động sharding qua nhiều node redis.</p>
<p>Redis cluster cung cấp vài cấp độ phân vùng dữ liệu mà cho phép tiếp tục thao tác dữ liệu khi một vài redis nodes lỗi hoặc không có sẵn (Tất nhiên vì một số node redis lỗi hoặc không thể giao tiếp được nên thao tác lấy dữ liệu từ ứng dụng đến redis sẽ chậm). Tuy nhiên cluster dừng thao tác khi có số lượng lỗi lớn như nhiều master node lỗi chẳng hạn.</p>
<h2>Install redis cluster from source</h2>
<p>Requirement: Redis-3.0+</p>
<p>03 nodes:</p>
<ul>
<li>node01: 192.168.10.111</li>
<li>node02: 192.168.10.112</li>
<li>node03: 192.168.10.113</li>
</ul>
<p><strong>Step1: Download script</strong></p>
<ul>
<li>Thực hiện download script đến 03 nodes</li>
</ul>
<p>Thực hiện download source tại: <a href="https://github.com/antirez/redis">https://github.com/antirez/redis</a>.</p>
<p>Phiên bản hiện tại là 5. Ở đây, chúng ta thực hiện với phiên bản thấp hơn là 4.0</p>
<pre class="brush: plain; title: ; notranslate" title="">
cd /opt/
wget https://github.com/antirez/redis/archive/4.0.11.tar.gz
tar zxvf 4.0.11.tar.gz
mv redis-4.0.11 redis
</pre>
<p><strong>Step2: Build redis</strong></p>
<p>Chúng ta thực hiện build redis trước khi create instance và cluster</p>
<pre class="brush: plain; title: ; notranslate" title="">
cd /opt/redis
make
make test
</pre>
<p><strong>Step3: Tạo instance trên node01</strong></p>
<p>Chúng ta sử script <code>create-cluster</code> để tạo instance và cluster thay vì thao tác thủ công.</p>
<ul>
<li>Thực hiện sửa tệp cấu hình redis trên node01</li>
</ul>
<p><code>cd /opt/redis/utils/create-cluster</code></p>
<p>Chúng ta sửa tệp <strong>create-cluster</strong> với một số nội dung sau cho phù hợp với nhu cầu (read from create-cluster). Với một số chú ý như sau:</p>
<ul>
<li>NODES=3 Số node cần create cluster</li>
<li>REPLICAS=1 nghĩa là sẽ tạo 01 slave với mỗi node master tạo ra.</li>
<li>BIND_HOST=192.168.1.X Gán địa chỉ IP để cho phép giao tiếp với các nodes trong cluster (mặc định BIND_HOST=127.0.0.1, vì vậy chỉ có thể truy cập chính node đó)</li>
</ul>
<p>Ngoài ra thêm giá trị tùy chọn <code>--protected-mode no --bind $BIND_HOST --maxmemory 5120mb</code> khi tạo instance. Với ý nghĩa như sau:</p>
<ul>
<li>protected-mode no &#8211;&gt; Thiết lập chế độ không yêu cầu authentication, cho test</li>
<li>bind $BIND_HOST &#8211;&gt; Gán giá trị địa chỉ IP cho node</li>
<li>maxmemory 5120mb &#8211;&gt; Thiết lập giá trị lưu trữ in-memory cho redis là 5120mb</li>
</ul>
<p>Thực hiện start create-cluster để tạo instance</p>
<p><code>./create-cluster start</code></p>
<p>Check instances đang chạy</p>
<p><code>netstat -ntlp</code></p>
<ul>
<li>Check version của redis</li>
</ul>
<p><code>/opt/redis/src/redis-cli -h 192.168.1.223 -p 30001 -v</code></p>
<p>Copy nội dung tệp <strong>create-cluster</strong> đến 02 nodes còn lại</p>
<pre class="brush: plain; title: ; notranslate" title="">
scp create-cluster root@192.168.10.112:/opt/redis/utils/create-cluster
scp create-cluster root@192.168.10.113:/opt/redis/utils/create-cluster
</pre>
<p><strong>Step4: Thực hiện chạy redis trên 02 nodes còn lại</strong></p>
<p>Sửa nội dung tệp cấu hình create-cluster</p>
<p>Thay giá trị <strong>BIND_HOST=192.168.1.112</strong> và <strong>BIND_HOST=192.168.1.113</strong> tương ứng với IP của redis server đang cấu hình</p>
<p>Start redis</p>
<p><code>./create-cluster start</code></p>
<p><strong>Step5: Thực hiện tạo cluster và replicas</strong></p>
<p>Sau khi tạo và chạy các instances, chúng ta thực hiện tạo cluster với replicas cho redis. Với phiên bản redis 5, chúng ta dễ dàng thực hiện tạo cluster với dòng lệnh <code>redis-cli</code>. Đối với redis version 3 hoặc 4, chúng ta sử dụng công cụ dòng lệnh cũ hơn là <code>redis-trib.rb</code>. Để chạy được <code>redis-trib.rb</code>, chúng ta cần cài đặt <strong>redis gem</strong></p>
<ul>
<li>Install RVM</li>
</ul>
<p>rvm( Ruby version manager) dùng quản lý gói ruby. Mặc định trong repo của centos 7 chỉ có sẵn ruby-2.0. Trong khi yêu cầu về cài đặt redis các version sau này yêu cầu ruby bản cao hơn 2.3+.</p>
<pre class="brush: plain; title: ; notranslate" title="">
curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -
curl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import -
curl -L get.rvm.io | bash -s stable
</pre>
<ul>
<li>Load RVM environment</li>
</ul>
<pre class="brush: plain; title: ; notranslate" title="">
source /etc/profile.d/rvm.sh
rvm reload
</pre>
<ul>
<li>Install ruby</li>
</ul>
<p>Tùy thuộc vào nhu cầu để cài phiên bản ruby phù hợp. Ở đây, tôi cài đặt ruby-2.6.</p>
<p><code>rvm install 2.6</code></p>
<ul>
<li>Install gem và redis</li>
</ul>
<pre class="brush: plain; title: ; notranslate" title="">
yum install gem -y
gem install redis
</pre>
<ul>
<li>Thực hiện tạo cluster cho replicas với 6 nodes (03 masters và 03 slaves)</li>
</ul>
<pre class="brush: plain; title: ; notranslate" title="">
./create-cluster create
&gt;&gt;&gt; Creating cluster
&gt;&gt;&gt; Performing hash slots allocation on 6 nodes...
Using 3 masters:
192.168.1.223:30001
192.168.1.223:30002
192.168.1.223:30003
Adding replica 192.168.1.223:30005 to 192.168.1.223:30001
Adding replica 192.168.1.223:30006 to 192.168.1.223:30002
Adding replica 192.168.1.223:30004 to 192.168.1.223:30003
&gt;&gt;&gt; Trying to optimize slaves allocation for anti-affinity
[WARNING] Some slaves are in the same host as their master
M: 81d8753dcb0e6c6022312511969373aeb580e119 192.168.1.223:30001
slots:0-5460 (5461 slots) master
M: 1285aab406fb15c4f08c1950fb909fef551e9cc6 192.168.1.223:30002
slots:5461-10922 (5462 slots) master
M: a613930c2c310008dfa6ca58e4ed10e9e015badc 192.168.1.223:30003
slots:10923-16383 (5461 slots) master
S: 70ef3ed73afada2484d678cb186e89aec95e6602 192.168.1.223:30004
replicates 1285aab406fb15c4f08c1950fb909fef551e9cc6
S: e648bad5eaed144c4339120f779d771ce386c7a7 192.168.1.223:30005
replicates a613930c2c310008dfa6ca58e4ed10e9e015badc
S: 44fe5f17f9ae41649b3a3fbd88cfcb5c36230fd5 192.168.1.223:30006
replicates 81d8753dcb0e6c6022312511969373aeb580e119
Can I set the above configuration? (type &#039;yes&#039; to accept): yes
&gt;&gt;&gt; Nodes configuration updated
&gt;&gt;&gt; Assign a different config epoch to each node
&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster
Waiting for the cluster to join..
&gt;&gt;&gt; Performing Cluster Check (using node 192.168.1.223:30001)
M: 81d8753dcb0e6c6022312511969373aeb580e119 192.168.1.223:30001
slots:0-5460 (5461 slots) master
1 additional replica(s)
M: 1285aab406fb15c4f08c1950fb909fef551e9cc6 192.168.1.223:30002
slots:5461-10922 (5462 slots) master
1 additional replica(s)
M: a613930c2c310008dfa6ca58e4ed10e9e015badc 192.168.1.223:30003
slots:10923-16383 (5461 slots) master
1 additional replica(s)
S: e648bad5eaed144c4339120f779d771ce386c7a7 192.168.1.223:30005
slots: (0 slots) slave
replicates a613930c2c310008dfa6ca58e4ed10e9e015badc
S: 44fe5f17f9ae41649b3a3fbd88cfcb5c36230fd5 192.168.1.223:30006
slots: (0 slots) slave
replicates 81d8753dcb0e6c6022312511969373aeb580e119
S: 70ef3ed73afada2484d678cb186e89aec95e6602 192.168.1.223:30004
slots: (0 slots) slave
replicates 1285aab406fb15c4f08c1950fb909fef551e9cc6
[OK] All nodes agree about slots configuration.
&gt;&gt;&gt; Check for open slots...
&gt;&gt;&gt; Check slots coverage...
[OK] All 16384 slots covered.
</pre>
<p><strong>Step6: Thực hiện kiểm tra thông tin cluster</strong></p>
<ul>
<li>Truy cập redis với tool redis-cli</li>
</ul>
<p><code>/opt/redis/src/redis-cli -h 192.168.1.223 -p 30001</code></p>
<ul>
<li>Check thông tin tổng quan của cluster</li>
</ul>
<pre class="brush: plain; title: ; notranslate" title="">
192.168.1.223:30001&gt; INFO
#Server
redis_version:4.0.11
redis_git_sha1:00000000
redis_git_dirty:0
redis_build_id:3020d12947b9f562
redis_mode:cluster
os:Linux 3.10.0-957.5.1.el7.x86_64 x86_64
arch_bits:64
multiplexing_api:epoll
atomicvar_api:atomic-builtin
gcc_version:4.8.5
process_id:9043
run_id:3a28ff03429ad6123e3fdcd89638ada4b5ff53c6
tcp_port:30001
uptime_in_seconds:3504
uptime_in_days:0
hz:10
lru_clock:413144
executable:/root/redis/src/redis-server
config_file:

#Clients
connected_clients:1
client_longest_output_list:0
client_biggest_input_buf:0
blocked_clients:0

#Memory
used_memory:2642048
used_memory_human:2.52M
used_memory_rss:10076160
used_memory_rss_human:9.61M
used_memory_peak:2681768
used_memory_peak_human:2.56M
used_memory_peak_perc:98.52%
used_memory_overhead:2560504
used_memory_startup:1445368
used_memory_dataset:81544
used_memory_dataset_perc:6.81%
total_system_memory:3973615616
total_system_memory_human:3.70G
used_memory_lua:37888
used_memory_lua_human:37.00K
maxmemory:5368709120
maxmemory_human:5.00G
maxmemory_policy:noeviction
mem_fragmentation_ratio:3.81
mem_allocator:jemalloc-4.0.3
active_defrag_running:0
lazyfree_pending_objects:0

#Persistence
loading:0
rdb_changes_since_last_save:2
rdb_bgsave_in_progress:0
rdb_last_save_time:1560690832
rdb_last_bgsave_status:ok
rdb_last_bgsave_time_sec:1
rdb_current_bgsave_time_sec:-1
rdb_last_cow_size:6467584
aof_enabled:1
aof_rewrite_in_progress:0
aof_rewrite_scheduled:0
aof_last_rewrite_time_sec:-1
aof_current_rewrite_time_sec:-1
aof_last_bgrewrite_status:ok
aof_last_write_status:ok
aof_last_cow_size:0
aof_current_size:81
aof_base_size:0
aof_pending_rewrite:0
aof_buffer_length:0
aof_rewrite_buffer_length:0
aof_pending_bio_fsync:0
aof_delayed_fsync:0

#Stats
total_connections_received:11
total_commands_processed:3301
instantaneous_ops_per_sec:1
total_net_input_bytes:174311
total_net_output_bytes:112410
instantaneous_input_kbps:0.04
instantaneous_output_kbps:0.00
rejected_connections:0
sync_full:1
sync_partial_ok:0
sync_partial_err:1
expired_keys:0
expired_stale_perc:0.00
expired_time_cap_reached_count:0
evicted_keys:0
keyspace_hits:0
keyspace_misses:0
pubsub_channels:0
pubsub_patterns:0
latest_fork_usec:649
migrate_cached_sockets:0
slave_expires_tracked_keys:0
active_defrag_hits:0
active_defrag_misses:0
active_defrag_key_hits:0
active_defrag_key_misses:0
#Replication
role:master
connected_slaves:1
slave0:ip=192.168.1.223,port=30006,state=online,offset=1036,lag=1
master_replid:80dcd3540523da23fb78280576aaa609a45eaf2b
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:1036
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1
repl_backlog_histlen:1036

#CPU
used_cpu_sys:1.26
used_cpu_user:0.64
used_cpu_sys_children:0.00
used_cpu_user_children:0.00

#Cluster
cluster_enabled:1

#Keyspace
</pre>
<p>Khi đó ta thấy các thông tin về redis như: version, connect, cpu, memory, ..</p>
<ul>
<li>Check thông tin replication</li>
</ul>
<pre class="brush: plain; title: ; notranslate" title="">
192.168.1.223:30001&gt; info replication
#Replication
role:master
connected_slaves:1
slave0:ip=192.168.1.223,port=30006,state=online,offset=4463,lag=0
master_replid:80dcd3540523da23fb78280576aaa609a45eaf2b
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:4463
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1
repl_backlog_histlen:4463
</pre>
<p>Ở đây, ta thấy bind port hiện tại 192.168.1.223:30001 có vai trò là master và có 01 slave0 đang connect là 192.168.1.223:30006</p>
<pre class="brush: plain; title: ; notranslate" title="">
172.25.80.78:30001&gt; INFO replication
#Replication
role:master
connected_slaves:1
slave0:ip=172.25.80.77,port=30002,state=online,offset=142295630168,lag=1
master_replid:93ac7e41dd61cbb298bf864fb270b49e16400f70
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:142295630182
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:142294581607
repl_backlog_histlen:1048576
172.25.80.78:30001&gt;
</pre>
<h2>Check benchmark</h2>
<p><code>redis-benchmark -h localhost -p 30001 -q -n 1000 -c 10 -P 5</code></p>
<p>Ý nghĩa:</p>
<p>Chạy redis-benchmark ở chế độ quiet, thực hiện tổng 1000 requests, chạy với 10 kết nối song song và pipepline 5 requests.</p>
<p>kết quả:</p>
<pre class="brush: plain; title: ; notranslate" title="">
PING_INLINE: 142857.14 requests per second
PING_BULK: 166666.67 requests per second
SET: 124999.99 requests per second
GET: 124999.99 requests per second
INCR: 124999.99 requests per second
LPUSH: 111111.12 requests per second
RPUSH: 124999.99 requests per second
LPOP: 124999.99 requests per second
RPOP: 124999.99 requests per second
SADD: 142857.14 requests per second
HSET: 142857.14 requests per second
SPOP: 142857.14 requests per second
LPUSH (needed to benchmark LRANGE): 142857.14 requests per second
LRANGE_100 (first 100 elements): 43478.26 requests per second
LRANGE_300 (first 300 elements): 15873.02 requests per second
LRANGE_500 (first 450 elements): 8695.65 requests per second
LRANGE_600 (first 600 elements): 7042.25 requests per second
MSET (10 keys): 111111.12 requests per second
</pre>
<div id="atatags-370373-5e140493c3466">
        <script type="text/javascript">
            __ATA.cmd.push(function() {
                __ATA.initVideoSlot('atatags-370373-5e140493c3466', {
                    sectionId: '370373',
                    format: 'inread'
                });
            });
        </script>
    </div><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Chia sẻ:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-1827" class="share-twitter sd-button share-icon" href="https://vnsys.wordpress.com/2019/11/03/redis-cluster-voi-nhieu-master-node/?share=twitter" target="_blank" title="Nhấn để chia sẻ trên Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-1827" class="share-facebook sd-button share-icon" href="https://vnsys.wordpress.com/2019/11/03/redis-cluster-voi-nhieu-master-node/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-telegram"><a rel="nofollow noopener noreferrer" data-shared="" class="share-telegram sd-button share-icon" href="https://vnsys.wordpress.com/2019/11/03/redis-cluster-voi-nhieu-master-node/?share=telegram" target="_blank" title="Click to share on Telegram"><span>Telegram</span></a></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-91768504-1827-5e140493c3c09' data-src='//widgets.wp.com/likes/index.html?ver=20190321#blog_id=91768504&amp;post_id=1827&amp;origin=vnsys.wordpress.com&amp;obj_id=91768504-1827-5e140493c3c09' data-name='like-post-frame-91768504-1827-5e140493c3c09'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height: 55px;'><span class='button'><span>Số lượt thích</span></span> <span class="loading">Đang tải...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div></div>
		</div>
			
				
				<div class="post-1823 post type-post status-publish format-standard hentry category-caching category-nginx category-web-server tag-nginx" id="post-1823">
<div class="posttitle">
	<h2 class="pagetitle"><a href="https://vnsys.wordpress.com/2019/10/31/ve-nginx-caching/" rel="bookmark" title="Permanent Link to Về nginx caching">Về nginx caching</a></h2>
	<small>
		Posted: Tháng Mười 31, 2019 in <a href="https://vnsys.wordpress.com/category/caching/" rel="category tag">Caching</a>, <a href="https://vnsys.wordpress.com/category/nginx/" rel="category tag">Nginx</a>, <a href="https://vnsys.wordpress.com/category/web-server/" rel="category tag">Web Server</a>		<br />
		Thẻ:<a href="https://vnsys.wordpress.com/tag/nginx/" rel="tag">Nginx</a>	</small>
</div>
<div class="postcomments"><a href="https://vnsys.wordpress.com/2019/10/31/ve-nginx-caching/#respond">0</a></div>
<div class="entry">
	<h2>1. Tại sao lại Nginx static cache?</h2>
<p>Nginx &#8211; ngoài việc phục vụ trực tiếp static file cực kỳ hiệu quả, nó còn có thể phục vụ với vai trò là proxy hoặc web server. Ngoài ra, Nginx còn có thể đảm nhận vai trò caching static file khi nó đứng trước một application server.</p>
<p>Có một số điểm cần biết:</p>
<ul>
<li>Nginx phục vụ trực tiếp static file cực kỳ nhanh, tuy nhiên nó cũng ảnh hưởng đến mặt hiệu suất xử lý của Nginx khi số lượng request tăng cao (cụ thể về CPU và RAM)</li>
<li>Nếu sử dụng nginx như static cache thì chỉ tốn về mặt lưu trữ dữ liệu cache (liên quan phần storage), và sử dụng rất ít hiệu suất của server (cụ thể về CPU và RAM), do application server không cần phải xử lý page khi client request, mà nginx cache server sẽ phản hồi trực tiếp nội dung đã lưu cache.</li>
<li>Để tăng hơn nữa khả năng phục vụ static file, chúng ta cần lưu trữ cache với storage mà có khả năng read/write cao hơn như ổ SSD. Để phục vụ các tệp tin như audio, video với dung lượng lớn chúng ta lưu trữ cache qua SAN, NAS hoặc qua mạng như glusterfs.</li>
</ul>
<h2><a id="user-content-2-cách-nginx-cache" class="anchor" href="https://github.com/keepwalking86/nginx-cache#2-c%C3%A1ch-nginx-cache" aria-hidden="true"></a>2. Cách Nginx cache</h2>
<ul>
<li>Một client request nội dung đến application server</li>
<li>Cache kiểm tra xem nội dung đã tồn tại chưa?
<ul>
<li>Nếu kiểm tra phản hồi chưa có bản lưu nội dung được cache, kết quả là thông tin <strong>MISS</strong> cache, khi đó nội dung sẽ được lấy từ application server.</li>
<li>Nếu kiểm tra mà nội dung đã được cache, khi đó kết quả thông tin <strong>HIT</strong> cache, khi đó nội dung sẽ trả trực tiếp đến client mà không cần contact với application server</li>
</ul>
</li>
<li>Một lần nội dung được cache, nó sẽ tiếp tục được phục vụ từ cache cho đến khi cache expire, hoặc khi cache bị clear/purge</li>
</ul>
<p align="center"><a href="https://github.com/keepwalking86/nginx-cache/blob/master/images/nginx-static-cache.png" target="_blank" rel="noopener noreferrer"><img class=" aligncenter" src="https://github.com/keepwalking86/nginx-cache/raw/master/images/nginx-static-cache.png" /></a></p>
<h2><a id="user-content-3-một-số-tùy-chọn-và-tham-số-cấu-hình" class="anchor" href="https://github.com/keepwalking86/nginx-cache#3-m%E1%BB%99t-s%E1%BB%91-t%C3%B9y-ch%E1%BB%8Dn-v%C3%A0-tham-s%E1%BB%91-c%E1%BA%A5u-h%C3%ACnh" aria-hidden="true"></a>3. Một số tùy chọn và tham số cấu hình</h2>
<p><strong>proxy_cache_path</strong>: Thiết lập vị trí lưu các cache file. Chúng ta thiết lập lưu trong đường dẫn /store/cache/example.com/</p>
<ul>
<li>levels: Chị thì này dùng để thiết lập cách các cache file được lưu đến hệ thống tệp tin (hay là cấp độ tạo thư mục cho lưu cache file). Nếu không định nghĩa, cache file được lưu trực tiếp vào vị trí được định nghĩa. Nếu một số lượng lớn các tệp tin cache được lưu trực tiếp vào một thư mục, khi đó tốc độ truy cập đến tệp tin sẽ chậm đi. Vì vậy, chúng ta định nghĩa levels, ví dụ như trong cấu hình levels=1:2 nghĩa là thư mục được phân thành 2 cấp, khi đó cache file được lưu vào thư mục con của vị trí lưu cache, dựa trên mã md5 hashes.</li>
<li>keys_zone: dùng thiết lập shared memory zone cho lưu trữ cache keys và metadata. Một bản sao các keys trong memory sẽ làm cho Nginx nhanh hơn để xác định request nào là HIT hay MISS mà không phải truy cập xuống disk, mục đích tăng tốc độ check. Ở đây, chúng ta định nghĩa keys_zone với tên example.com. Với 1MB zone, có thể lưu trữ dữ liệu cho khoảng 8000 keys, vì thế mà chúng ta cấu hình 400MB, có thể lưu trữ đến 3200000 keys.</li>
<li>Inactive: Chỉ thị này được dùng để bảo nginx clear cache một số asset mà không được truy cập trong khoảng time được thiết lập mà không quan tâm đến là cache đó đã expire hay chưa. Inactive content khác với expire content. Nginx không tự động xóa nội dung mà đã expire được định nghĩa bởi một cache control header. Ở đây, chúng ta thiết lập inactive=10d (10 ngày). Mặc định inactive được thiết lập là 10 phút.</li>
<li>max_size: Thiết lập không gian disk tối đa mà nginx sử dụng để lưu cache. Nếu không định nghĩa, mặc định nó sử dụng toàn bộ không gian disk có sẵn để sử dụng cho việc lưu cache. Khi cache đạt đến giới hạn được định nghĩa, một tiến trình cache manager được sử dụng để remove các tệp mà được sử dụng gần nhất để đưa cache size về dưới giới hạn được định nghĩa.</li>
</ul>
<p><strong>proxy_cache_key</strong>: Định nghĩa key cho cache. Mặc định cấu hình với giá trị sau:</p>
<p><code>proxy_cache_key $scheme$proxy_host$uri$is_args$args;</code></p>
<p>Chúng ta có thể thay thế giá trị các biến sử dụng trong định nghĩa key, tùy thuộc giá trị mong muốn. Ví dụ định nghĩa key cho cache như sau:</p>
<p><code>proxy_cache_key "$scheme://$host$request_uri";</code></p>
<p>Khi đó key có kiểu giống như này: <a href="https://example.com/abc.jpg" rel="nofollow">https://example.com/abc.jpg</a></p>
<p><strong>proxy_cache_revalidate</strong>: Nếu chỉ thị này enable, Nginx xác minh nội dung cache hiện tại vẫn hợp lệ. Cái này cho phép tiết kiệm bandwidth bởi vì server chỉ gửi item đầy đủ nếu nó đã sửa đổi từ lần được khi lại trong header Last-Modified kèm theo tệp tin khi Nginx tổ chức cache nó.</p>
<p><strong>proxy_cache_min_uses</strong>: Thiết lập số lần request một nội dung (item) của một client trước khi Nginx thực hiện cache nó. Mặc định giá trị proxy_cache_min_uses là 1.</p>
<p><strong>proxy_cache_use_stale</strong>: Khi origin server down trong một khoảng thời gian (mà chưa refesh) gặp các mã lỗi 5xx, khi đó client request nội dung mà đã được cache từ nginx cache server nó sẽ vẫn nhận thông tin đã cache.</p>
<p>Để bật tính năng này, chúng ta cấu hình như sau:</p>
<pre><code>location / {
    # ...
    proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;
}
</code></pre>
<p><strong>proxy_next_upstream</strong>: Chỉ định trường hợp nào một request sẽ được chuyển qua nginx cache server tiếp theo. Chúng ta chỉ định các trường hợp lỗi sau:</p>
<p><code>proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</code></p>
<p><strong>proxy_ignore_headers</strong>: Chỉ thị cho phép Nginx bỏ qua một số header. Ví dụ bỏ qua header Cache-Control và Set-Cookie</p>
<p><code>proxy_ignore_headers Cache-Control Set-Cookie;</code></p>
<p><strong>proxy_cache_methods</strong>: Chỉ thị cho phép một số method được cache, mặc định GET và HEAD luôn được phép.</p>
<p><strong>proxy_cache_lock</strong>: Tùy bật tùy chọn này với giá trị “on”, nếu nhiều client cùng request đến một file mà hiện tại chưa cache, khi đó chỉ có request đầu tiên được phép thực hiện contact với origin server và sau đó nội dung sẽ được cache.</p>
<h2><a id="user-content-4-splitting-the-cache-across-multiple-hard-drives" class="anchor" href="https://github.com/keepwalking86/nginx-cache#4-splitting-the-cache-across-multiple-hard-drives" aria-hidden="true"></a>4. Splitting the Cache Across Multiple Hard Drives</h2>
<p>Nếu có nhiều hard disk, chúng ta có thể tách vị trí lưu cache đến nhiều vị trí khác nhau. Ví dụ cấu hình sau:</p>
<pre><code>proxy_cache_path /path/to/hdd1 levels=1:2 keys_zone=my_cache_hdd1:10m
                 max_size=10g inactive=60m use_temp_path=off;
proxy_cache_path /path/to/hdd2 levels=1:2 keys_zone=my_cache_hdd2:10m
                 max_size=10g inactive=60m use_temp_path=off;

split_clients $request_uri $my_cache {
              50%          “my_cache_hdd1”;
              50%          “my_cache_hdd2”;
}

server {
    # ...
    location / {
        proxy_cache $my_cache;
        proxy_pass http://my_upstream;
    }
}

</code></pre>
<p>Ở đây, chúng ta tách vị trí lưu cache ra 2 hard disk và lưu ở 2 key zone. Sử dụng khối cấu hình “split_clients” định nghĩa key zone chung với biến $my_cache cho 2 key zone và cho phép mỗi hard disk sẽ cache một nửa số lượng request (50%). MD5 hash dựa trên biến $request_uri để xác định cache nào được sử dụng cho mỗi request</p>
<p><strong>Read more</strong></p>
<p><a href="https://www.nginx.com/blog/nginx-caching-guide/" rel="nofollow">https://www.nginx.com/blog/nginx-caching-guide/</a></p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Chia sẻ:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-1823" class="share-twitter sd-button share-icon" href="https://vnsys.wordpress.com/2019/10/31/ve-nginx-caching/?share=twitter" target="_blank" title="Nhấn để chia sẻ trên Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-1823" class="share-facebook sd-button share-icon" href="https://vnsys.wordpress.com/2019/10/31/ve-nginx-caching/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-telegram"><a rel="nofollow noopener noreferrer" data-shared="" class="share-telegram sd-button share-icon" href="https://vnsys.wordpress.com/2019/10/31/ve-nginx-caching/?share=telegram" target="_blank" title="Click to share on Telegram"><span>Telegram</span></a></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-91768504-1823-5e140493c5630' data-src='//widgets.wp.com/likes/index.html?ver=20190321#blog_id=91768504&amp;post_id=1823&amp;origin=vnsys.wordpress.com&amp;obj_id=91768504-1823-5e140493c5630' data-name='like-post-frame-91768504-1823-5e140493c5630'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height: 55px;'><span class='button'><span>Số lượt thích</span></span> <span class="loading">Đang tải...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div></div>
		</div>
			
				
				<div class="post-1809 post type-post status-publish format-standard hentry category-mongodb tag-ha tag-mongo-shake tag-mongodb" id="post-1809">
<div class="posttitle">
	<h2 class="pagetitle"><a href="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/" rel="bookmark" title="Permanent Link to Triển khai hệ thống&nbsp;Mongo-Shake">Triển khai hệ thống&nbsp;Mongo-Shake</a></h2>
	<small>
		Posted: Tháng Tư 19, 2019 in <a href="https://vnsys.wordpress.com/category/mongodb/" rel="category tag">MongoDB</a>		<br />
		Thẻ:<a href="https://vnsys.wordpress.com/tag/ha/" rel="tag">HA</a>, <a href="https://vnsys.wordpress.com/tag/mongo-shake/" rel="tag">Mongo-Shake</a>, <a href="https://vnsys.wordpress.com/tag/mongodb/" rel="tag">MongoDB</a>	</small>
</div>
<div class="postcomments"><a href="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/#comments">1</a></div>
<div class="entry">
	<h2 class="western">1. Giới thiệu</h2>
<p>Cho mục đích dự phòng hệ thống khi có thảm họa, như trường hợp đơn giản là mất điện ở ISP, trường hợp điển hình có thể thấy gần đây là vụ sập data center VNG tháng 9/2018, khi đó chúng ta cần dựng hệ thống tại nhiều data center khác nhau.</p>
<p>Trong trường hợp dự phòng hệ thống MongoDB, chúng ta cũng dựng hệ thống ở nhiều data center khác nhau. MongoDB có hỗ trợ kỹ thuật replica set để cho phép replication dữ liệu qua nhiều node với mô hình master/slave. Với replica set, hệ thống chỉ có một master, vì vậy mà mô hình cũng chỉ có một active. Để cho phép hệ thống MongoDB có nhiều master, active ở nhiều data center và có thể dự phòng được dữ liệu, chúng ta cần sử dụng một công cụ mở rộng. Trong phần này tôi sẽ giới thiệu về Mongo-Shake.</p>
<h3 class="western">1.1 Về Mongo-Shake</h3>
<p>Mongo-Shake là nền tảng cho phép replication dữ liệu dựa trên oplog của MongoDB. Nó đọc logs hoạt động oplog của cụm MongoDB và thực hiện nhân bản dữ liệu MongoDB và thực hiện các yêu cầu cụ thể tiếp theo dựa trên log hoạt động. Ngoài tính năng chính là đồng bộ dữ liệu cluster MongoDB, Mongo-Shake còn hỗ trợ một số tình huống khác như: nhân bản bất đồng bộ, đồng bộ cache, giám sát dựa vào log</p>
<h3 class="western">1.2 Tính năng và mô hình hoạt động</h3>
<p>Mongo-Shake tìm nạp oplog từ mongodb nguồn và thực hiện phát lại (replay) vào mongodb đích hoặc gửi đến các điểm khác trong các tunnel khác nhau. Mongo-Shake hỗ trợ một số tunnel sau:</p>
<ul>
<li>Direct: Thực hiện ghi trực tiếp MongoDB đích</p>
</li>
<li>RPC: Kết nối qua net/rpc vào go</p>
</li>
<li>
<p>TCP: Kết nối qua TCP socket</p>
</li>
<li>
<p>File: Kết nối qua một tệp tin</p>
</li>
<li>
<p>Kafka: Kết nối qua một kênh kafka</p>
</li>
</ul>
<p><b>Một số tính năng của Mongo-Shake:</b></p>
<ul>
<li>Parallel Replication
</li>
<li>
<p>High Availability</p>
</li>
<li>
<p>Filter</p>
</li>
<li>
<p>Compress</p>
</li>
<li>
<p>Gid</p>
</li>
<li>
<p>Checkpoint</p>
</li>
<li>
<p>Troubleshouting và Speed Limit</p>
</li>
<li>
<p>Conflict Detection</p>
</li>
</ul>
<p>Ảnh dưới mô tả tổng quan luồng dữ liệu của Mongo-Shake</p>
<p><img data-attachment-id="1810" data-permalink="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/dataflow/" data-orig-file="https://vnsys.files.wordpress.com/2019/04/dataflow.png" data-orig-size="2102,1472" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dataflow mongo-shake" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=614" class="  wp-image-1810 aligncenter" src="https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=693&#038;h=485" alt="dataflow mongo-shake" width="693" height="485" srcset="https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=693&amp;h=485 693w, https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=1386&amp;h=970 1386w, https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=150&amp;h=105 150w, https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=300&amp;h=210 300w, https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=768&amp;h=538 768w, https://vnsys.files.wordpress.com/2019/04/dataflow.png?w=1024&amp;h=717 1024w" sizes="(max-width: 693px) 100vw, 693px" /></p>
<p>&nbsp;</p>
<p><img data-attachment-id="1811" data-permalink="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/dataflow_2/" data-orig-file="https://vnsys.files.wordpress.com/2019/04/dataflow_2.png" data-orig-size="1388,1005" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dataflow_2" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=614" class=" size-full wp-image-1811 aligncenter" src="https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=614" alt="dataflow_2" srcset="https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=614 614w, https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=1228 1228w, https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=150 150w, https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=300 300w, https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=768 768w, https://vnsys.files.wordpress.com/2019/04/dataflow_2.png?w=1024 1024w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Source MongoDB ở đây có thể là mongod đơn, replica set hoặc sharding. Destination MongoDB có thể là mongod hoặc mongos. Nếu source là replica set, khi đó chúng ta sẽ tìm nạp dữ liệu từ secondary/hidden để giảm áp lực lên primary.</p>
<h2 class="western">2. Triển khai Replica set MongoDB và Mongo-Shake</h2>
<h3 class="western">2.1 Mô hình thực hiện</h3>
<p>Chúng ta thực hiện thiết lập mô hình đơn giản như sau:</p>
<p><img data-attachment-id="1812" data-permalink="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/mongodb-in-2-datacenters/" data-orig-file="https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png" data-orig-size="865,522" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sync-mongodb-in-2-datacenters" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=614" class=" size-full wp-image-1812 aligncenter" src="https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=614" alt="sync-mongodb-in-2-datacenters" srcset="https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=614 614w, https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=150 150w, https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=300 300w, https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png?w=768 768w, https://vnsys.files.wordpress.com/2019/04/mongodb-in-2-datacenters.png 865w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p><b>Requirement</b></p>
<p>05+ server centos 7</p>
<ul>
<li>01 server (192.168.10.110) cài go-1.9+, govendor, git và Mongo-Shake
</li>
<li>
<p>02+ server (192.168.10.111-112) thiết lập replica set mongodb (replicate set id: mongoshake1)</p>
</li>
<li>
<p>02+ server (192.168.10.113-114) thiết lập replica set mongodb (replicate set id: mongoshake2)</p>
</li>
</ul>
<h3 class="western">2.2 Thiết lập replica set MongoDB</h3>
<h4 class="western">a. Cài đặt MongoDB 3</h4>
<p>Chúng ta thực hiện cài đặt MongoDB 3x trên các server mà sẽ thực hiện nhiệm vụ MongoDB server.</p>
<p><b>Step1: Thực hiện tạo repo mongodb</b></p>
<pre>cat &gt;/etc/yum.repos.d/mongo.repo&lt;&lt;EOF
[mongodb-org-3.6]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/\$releasever/mongodb-org/3.6/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc
EOF</pre>
<p><b>Step2: Cài đặt MongoDB</b></p>
<p>Cài đặt</p>
<pre>yum install mongodb-org -y</pre>
<p>Cho phép truy cập mongodb server từ một số IP</p>
<pre>sed -i 's/127.0.0.1/0.0.0.0/' /etc/mongod.conf</pre>
<p><b>Step3: Thiết lập firewall</b></p>
<p>Chỉ cho phép vùng mạng hoặc những IP cần thiết được phép truy cập MongoDB</p>
<pre>firewall-cmd --permanent --zone=public --add-rich-rule='rule family="ipv4" source address="192.168.10.0/24" port port="27017" protocol="tcp" accept'
firewall-cmd --reload</pre>
<p><b>Step4: Start mongod</b></p>
<pre>systemctl start mongod.service
systemctl enable mongod.service</pre>
<h4 class="western">b. Replica set MongoDB tại cụm cluster01</h4>
<p>Thiết lập replica set mongodb với id là mongoshake1</p>
<p><b>Step1: Enable </b><b>r</b><b>eplication </b><b>trên các MongoDB</b></p>
<p>Chỉnh tệp tin mongod.conf và thêm tùy chọn sau</p>
<pre>cat &gt;&gt;/etc/mongod.conf &lt;&lt;EOF
replication:
    #replica set id
    replSetName: mongoshake1
EOF
</pre>
<ul>
<li>Restart mongod</li>
</ul>
<pre>systemctl restart mongod</pre>
<p><b>Step2: </b><b>Thiết lập hostname</b></p>
<pre>cat &gt;&gt;/etc/hosts &lt;&lt;EOF
192.168.10.111    mongo01
192.168.10.112    mongo02
EOF</pre>
<p><b>Step3: Khởi tạo replica set</b></p>
<p>Thực hiện khởi tạo replica set mongodb trên server mongo01</p>
<pre>mongo
&gt;rs.initiate( { _id: "mongoshake1", members: [ { _id: 0, host: "mongo01:27017", priority: 2 } ] } )
&gt;rs.add({ _id:2,host:"mongo02:27017",priority:1 })</pre>
<h4 class="western">c. Replica set MongoDB tại cụm cluster02</h4>
<p>Thiết lập replica set mongodb với id là mongoshake2</p>
<p><b>Step1: Enable </b><b>r</b><b>eplication </b><b>trên các MongoDB</b></p>
<p>Chỉnh tệp tin mongod.conf và thêm tùy chọn sau</p>
<pre>cat &gt;&gt;/etc/mongod.conf &lt;&lt;EOF
replication:
    #replica set id
    replSetName: mongoshake2
EOF
</pre>
<ul>
<li>Restart mongod</li>
</ul>
<pre>systemctl restart mongod</pre>
<p><b>Step2: </b><b>Thiết lập hostname</b></p>
<pre>cat &gt;&gt;/etc/hosts &lt;&lt;EOF
192.168.10.113    mongo03
192.168.10.114    mongo04
EOF</pre>
<p><b>Step3: Khởi tạo replica set</b></p>
<p>Thực hiện khởi tạo replica set mongodb trên server mongo01</p>
<pre>mongo
&gt;rs.initiate( { _id: "mongoshake2", members: [ { _id: 0, host: "mongo03:27017", priority: 2 } ] } )
&gt;rs.add({ _id:2,host:"mongo04:27017",priority:1 })</pre>
<h3 class="western">2.3 Thiết lập Mongo-Shake</h3>
<h4 class="western">a. Cài đặt Go language</h4>
<ul>
<li>Download go language</li>
</ul>
<p>Download go at <a href="https://golang.org/dl/">https://golang.org/dl/</a></p>
<pre>curl -O https://dl.google.com/go/go1.12.4.linux-amd64.tar.gz
tar -C /usr/local -xzvf go1.12.4.linux-amd64.tar.gz</pre>
<ul>
<li>Thiết lập environments</li>
</ul>
<pre>cat &gt;&gt;~/.bashrc&lt;&lt;EOF
export GOPATH=/root/mongo-shake
export GOROOT=/usr/local/go
export PATH=$PATH:/usr/local/go/bin
EOF</pre>
<ul>
<li>Logout and login</li>
</ul>
<h4 class="western">b. Cài đặt govendor</h4>
<pre>yum install git gcc -y
go get -u github.com/kardianos/govendor
cp  mongo-shake/bin/govendor /usr/local/go/bin/
rm -rf /root/mongo-shake</pre>
<h4 class="western">c. Thiết lập Mongo-Shake</h4>
<ul>
<li>Download mongo-shake</li>
</ul>
<pre>cd /root
git clone https://github.com/aliyun/mongo-shake.git</pre>
<ul>
<li>pull all dependencies &amp; build collector</li>
</ul>
<pre>cd /root/mongo-shake/src
govendor sync
cd /root/mongo-shake
./build.sh</pre>
<ul>
<li>Sửa nội dung source và destination mongodb trong tệp conf/collector.conf như sau</li>
</ul>
<pre>mongo_urls = mongodb://192.168.10.111:27017,192.168.10.112:27017
tunnel.address = mongodb://192.168.10.113:27017,192.168.10.114:27017</pre>
<ul>
<li>Chạy Mongo-Shake</li>
</ul>
<pre>./bin/collector -conf=conf/collector.conf</pre>
<p><strong>Tham khảo thêm tại:</strong></p>
<p><a href="https://github.com/alibaba/MongoShake">https://github.com/alibaba/MongoShake</a></p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Chia sẻ:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-1809" class="share-twitter sd-button share-icon" href="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/?share=twitter" target="_blank" title="Nhấn để chia sẻ trên Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-1809" class="share-facebook sd-button share-icon" href="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-telegram"><a rel="nofollow noopener noreferrer" data-shared="" class="share-telegram sd-button share-icon" href="https://vnsys.wordpress.com/2019/04/19/trien-khai-he-thong-mongo-shake/?share=telegram" target="_blank" title="Click to share on Telegram"><span>Telegram</span></a></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-91768504-1809-5e140493c9e48' data-src='//widgets.wp.com/likes/index.html?ver=20190321#blog_id=91768504&amp;post_id=1809&amp;origin=vnsys.wordpress.com&amp;obj_id=91768504-1809-5e140493c9e48' data-name='like-post-frame-91768504-1809-5e140493c9e48'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height: 55px;'><span class='button'><span>Số lượt thích</span></span> <span class="loading">Đang tải...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div></div>
		</div>
			
				
				<div class="post-1782 post type-post status-publish format-standard hentry category-pbx tag-asterisk tag-freepbx tag-gsm-gateway tag-ip-pbx tag-voip" id="post-1782">
<div class="posttitle">
	<h2 class="pagetitle"><a href="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/" rel="bookmark" title="Permanent Link to Thiết lập GSM gateway và&nbsp;FreePBX">Thiết lập GSM gateway và&nbsp;FreePBX</a></h2>
	<small>
		Posted: Tháng Ba 17, 2019 in <a href="https://vnsys.wordpress.com/category/pbx/" rel="category tag">pbx</a>		<br />
		Thẻ:<a href="https://vnsys.wordpress.com/tag/asterisk/" rel="tag">Asterisk</a>, <a href="https://vnsys.wordpress.com/tag/freepbx/" rel="tag">FreePBX</a>, <a href="https://vnsys.wordpress.com/tag/gsm-gateway/" rel="tag">GSM-gateway</a>, <a href="https://vnsys.wordpress.com/tag/ip-pbx/" rel="tag">IP-PBX</a>, <a href="https://vnsys.wordpress.com/tag/voip/" rel="tag">VoIP</a>	</small>
</div>
<div class="postcomments"><a href="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/#comments">1</a></div>
<div class="entry">
	<h2>1. Kết nối GSM gateway Yearstar TG200 và FreePBX</h2>
<p>Hướng dẫn step-by-step cách cấu hình kết nối GSM Gateway và FreePBX (GSM Gateway trong trường hợp này tôi sẽ sử dụng Yeastar TG200 cho test). Khi đó GSM trunk trên Yearstar TG200 sẽ mở rộng trên hệ thống FreePBX. Mục đích đạt được:</p>
<ul>
<li>Thực hiện cuộc gọi ra từ hệ thống FreePBX qua GSM trunks của Yearstar gateway.</p>
</li>
<li>Thực hiện nhận cuộc gọi từ bên ngoài vào thông qua hệ thống GSM trunks of Yearstar gateway đến hệ thống FreePBX</p>
</li>
</ul>
<p>Mô hình hệ thống như sau:</p>
<p><img data-attachment-id="1783" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/gsm-gateway-freepbx/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png" data-orig-size="1176,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gsm-gateway-freepbx" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=614" class=" size-full wp-image-1783 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=614" alt="gsm-gateway-freepbx" srcset="https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=768 768w, https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png?w=1024 1024w, https://vnsys.files.wordpress.com/2019/03/gsm-gateway-freepbx.png 1176w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Thông số sẽ thực hiện:</p>
<ul>
<li>GSM Gateway Yearstar TG200 và FreePBX sử dụng chế độ <strong>Service provider</strong> để thực hiện kết nối với nhau.
</li>
<li>
<p>Yearstar TG200: 192.168.10.117/24</p>
</li>
<li>
<p>FreePBX: 192.168.10.118/24</p>
</li>
<li>
<p>GSM2: +84906226654</p>
</li>
</ul>
<h3>1.1 Tạo VoIP Trunk trên TG200</h3>
<p>Path: Gateway&gt; VoIP Settings&gt; VoIP trunk&gt; Add VoIP Trunk.<br />
Khi đó thực hiện chọn mode là “Service Provider”, và điền địa chỉ IP của FreePBX (192.168.10.118)</p>
<p><img data-attachment-id="1784" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/add-extensions-2/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png" data-orig-size="709,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-extensions" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png?w=614" class=" size-full wp-image-1784 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png?w=614" alt="add-extensions" srcset="https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/add-extensions-1.png 709w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Trong đó:</p>
<ul>
<li>Trunk Type: Service Provider
</li>
<li>
<p>Type: SIP</p>
</li>
<li>
<p>Provider Name: FreePBX</p>
</li>
<li>
<p>Hostname/IP: địa chỉ IP của FreePBX server (192.168.10.118)</p>
</li>
</ul>
<p>Sau đó thực hiện Save → Apply</p>
<p>Kiểm tra trạng thái trunk</p>
<p><img data-attachment-id="1785" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/trunk-status/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/trunk-status.png" data-orig-size="949,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="trunk-status" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=614" class=" size-full wp-image-1785 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=614" alt="trunk-status" srcset="https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/trunk-status.png?w=768 768w, https://vnsys.files.wordpress.com/2019/03/trunk-status.png 949w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<h3>1.2 Tạo VoIP Trunk trên FreePBX</h3>
<p>Path: Connectivity&gt; Trunks&gt; Add Trunks&gt; Add SIP (chan_pjsip) Trunk</p>
<p><img data-attachment-id="1786" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/voip-trunk-freepbx/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png" data-orig-size="558,287" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="voip-trunk-freepbx" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png?w=558" class="alignnone size-full wp-image-1786" src="https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png?w=614" alt="voip-trunk-freepbx" srcset="https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png 558w, https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/voip-trunk-freepbx.png?w=300 300w" sizes="(max-width: 558px) 100vw, 558px"   /></p>
<p>Vào thông tin trong tab General, với Trunk Name là “TG200”</p>
<p><img data-attachment-id="1787" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/add-trunk-name/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png" data-orig-size="674,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-trunk-name" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png?w=614" class=" size-full wp-image-1787 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png?w=614" alt="add-trunk-name" srcset="https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/add-trunk-name.png 674w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Tiếp đến, chuyển qua tab <strong>pjsip Settings</strong> để thiết lập PJSIP</p>
<p>Ở tab General:</p>
<p><img data-attachment-id="1788" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/add-trunk-general/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png" data-orig-size="730,527" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-trunk-general" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png?w=614" class=" size-full wp-image-1788 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png?w=614" alt="add-trunk-general" srcset="https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/add-trunk-general.png 730w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<ul>
<li>Chọn chế độ “Authentication” là None, để tắt chứng thực
</li>
<li>
<p>Vào thông tin SIP server là địa chỉ IP của GSM TG200 gateway (192.168.10.117)</p>
</li>
<li>
<p>SIP Server Port là 5060 (default)</p>
</li>
</ul>
<p>Tiếp tục qua tab <strong>Advanced</strong>:</p>
<p><img data-attachment-id="1789" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/add-trunk-advanced/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png" data-orig-size="566,625" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-trunk-advanced" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png?w=272" data-large-file="https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png?w=566" class=" size-full wp-image-1789 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png?w=614" alt="add-trunk-advanced" srcset="https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png 566w, https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png?w=136 136w, https://vnsys.files.wordpress.com/2019/03/add-trunk-advanced.png?w=272 272w" sizes="(max-width: 566px) 100vw, 566px"   /></p>
<ul>
<li>Chọn giá trị No cho “Permanent Auth Rejection” để không bắt lỗi chứng thực khi gateway kết nối.
</li>
<li>
<p>Vào thông tin <strong>From Domain</strong> là địa chỉ IP của gateway, mục đích là khi gateway request đến trunk trên FreePBX nó sẽ hiện thông tin header request của gateway TG200.</p>
</li>
</ul>
<p>Sau đó thực hiện Submit → Apply Config</p>
<h3>1.3 Tạo một extension trên FreePBX</h3>
<p>Mở Applications&gt; Extensions&gt; Add Extension&gt; Add New Chan_SIP Extension</p>
<p><img data-attachment-id="1790" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/add-sip-extension/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png" data-orig-size="709,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add-SIP-Extension" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png?w=614" class=" size-full wp-image-1790 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png?w=614" alt="Add-SIP-Extension" srcset="https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/add-sip-extension.png 709w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Thực hiện tạo một extension Chan_SIP với thông tin:</p>
<ul>
<li>User Extension: Vào thông tin số mở rộng dùng khi dial
</li>
<li>
<p>Display Name: Thiết lập tên hiển cho số này khi gọi</p>
</li>
<li>
<p>Secret: Vào thông tin mật khẩu cho tài khoản này</p>
</li>
</ul>
<p>Note: Cả Chan_SIP và PJSIP đều có thể cho phép tạo extension number nhưng Chan_SIP cho phép hỗ trợ NAT. Hiện tại thì PJSIP được sử dụng cho default SIP (với port 5060), Chan_SIP sử dụng port 5160.</p>
<p>Để tạo các tài khoản khoản cho SIP extension gồm cả Chan_SIP và PJSIP, chúng ta thực hiện như các bước ở trên.</p>
<h2>2. Cấu hình Incoming call vào FreePBX</h2>
<p>Phần này, chúng ta sẽ cấu hình để cho phép thực hiện cuộc vào từ bên ngoài vào hệ thống FreePBX. Cuộc gọi đầu tiên sẽ đi qua GSM gateway TG200. TG200 sẽ chuyển tiếp cuộc gọi vào hệ thống FreePBX. FreePBX thực hiện phân phối cuộc gọi đến số extension phù hợp.</p>
<h3>2.1 Tạo route Mobile to IP trên TG200</h3>
<p>Trên TG200, Mở Gateway&gt; Route Settings &gt; Mobile to IP</p>
<p><img data-attachment-id="1791" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/route-to-freepbx/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png" data-orig-size="651,466" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="route-to-freepbx" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png?w=614" class=" size-full wp-image-1791 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png?w=614" alt="route-to-freepbx" srcset="https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/route-to-freepbx.png 651w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Vào các thông tin sau:</p>
<ul>
<li>Simple Mode: No (để show thêm một số thông tin tùy chọn, nếu chọn Yes thì cấu hình ở chế độ rút gọn)
</li>
<li>
<p>Route Name: đặt tên để route từ gateway TG200 đến FreePBX, ở đây đặt tên <strong>To_FreePBX</strong></p>
</li>
<li>
<p>Call Source: Hiện tại tôi đang cắm SIM ở khe số 02, vì vậy chọn Mobile-GSM2. Ở đây, chúng ta gắn sim ở khe nào thì chọn Call Source phù hợp.</p>
</li>
<li>
<p>Call Destination: Lựa chọn SPS-FreePBX. Khi đó tất cả cuộc gọi đến GSM2 sẽ được chuyển đến FreePBX qua trunk này.</p>
</li>
<li>
<p>Hotline: 999, đặt một số bất kỳ mà cùng với số DID trên FreePBX trong cấu hình inbound và outbound. Thường ta đặt là số Sim card hoặc số serial Sim.</p>
</li>
</ul>
<h3>2.2 Cấu hình Inbound Route trên FreePBX</h3>
<p>Thực hiện cấu hình “Inbound Routes” để cho phép nhận chuyển tiếp từ gateway TG200 vào FreePBX</p>
<p>Mở Connectivity&gt; Inbound Routes&gt; Add Inbound Route</p>
<p><img data-attachment-id="1792" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/inbound-route/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/inbound-route.png" data-orig-size="724,566" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="inbound-route" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/inbound-route.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/inbound-route.png?w=614" class=" size-full wp-image-1792 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/inbound-route.png?w=614" alt="inbound-route" srcset="https://vnsys.files.wordpress.com/2019/03/inbound-route.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/inbound-route.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/inbound-route.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/inbound-route.png 724w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<ul>
<li>Description: Vào thông tin mô tả cho Inbound Routes
</li>
<li>
<p>DID Number: 999 (cùng thông tin số hotline trên TG200)</p>
</li>
<li>
<p>Set Destination: Chọn Extension và chọn số extension đã tạo, ở đây là 100. Khi đó từ bên ngoài gọi vào số mobile gắn trên sim, sẽ chuyển tiếp cuộc gọi đến thiết bị cài đặt SIP có extension 100.</p>
</li>
</ul>
<h2>3. Cấu hình Outgoing call từ FreePBx qua TG200</h2>
<p>Phần này, chúng ta sẽ cấu hình để cho phép thực hiện cuộc vào từ một số extension ra ngoài qua TG200. Đầu tiên cuộc gọi từ FreePBX sẽ kết nối GSM gateway TG200. TG200 chọn một giá trị định tuyến phù hợp, mà sẽ qua GSM nào (có thể qua một GSM hoặc một nhóm GSM) và thực hiện kết nối ra bên ngoài.</p>
<p>Thực hiện cấu hình như sau:</p>
<h3>3.1 Cấu hình Outbound Route trên FreePBX</h3>
<p>Mở FreePBX &gt; Connectivity&gt; Outbound routes&gt; Add Outbound Route</p>
<p><img data-attachment-id="1793" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/outbound-route-settings/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png" data-orig-size="770,677" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="outbound-route-settings" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=614" class=" size-full wp-image-1793 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=614" alt="outbound-route-settings" srcset="https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png?w=768 768w, https://vnsys.files.wordpress.com/2019/03/outbound-route-settings.png 770w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Tab “Route Settings”, vào các thông tin như sau:</p>
<ul>
<li>Route Name: Vào tên cho route, ở đây là To_TG200
</li>
<li>
<p>Trunk Sequence for Matched Routes: Chọn tên Trunk đã tạo ở 2.2 cho kết nối Trunk đến gateway TG200. Ở đây tên Trunk đã tạo trước đó là “TG200”</p>
</li>
</ul>
<p>Tiếp đó chuyển qua tab <strong>Dial Parterns</strong></p>
<p><img data-attachment-id="1794" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/outbound-route-dial/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png" data-orig-size="989,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="outbound-route-dial" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=614" class=" size-full wp-image-1794 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=614" alt="outbound-route-dial" srcset="https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png?w=768 768w, https://vnsys.files.wordpress.com/2019/03/outbound-route-dial.png 989w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<ul>
<li>prefix: 9. Là số đứng trước số cần gọi ra (Ví dụ gọi 0988888888, thì từ thiết bị cài đặt số extension sẽ ấn các phím <code>90988888888</code> để thực hiện cuộc gọi ra)
</li>
<li>
<p>match parttern: chúng ta vào giá trị “X.” (X đúng với giá trị các số 0-9)</p>
</li>
</ul>
<h3>3.2 Tạo route IP to Mobile trên TG200</h3>
<p>Mở TG200 → Gateway → Route Settings → IP to Mobile → Add IP to Mobile Route</p>
<p><img data-attachment-id="1795" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/route-from-freepbx/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png" data-orig-size="653,332" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="route-from-freepbx" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png?w=614" class=" size-full wp-image-1795 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png?w=614" alt="route-from-freepbx" srcset="https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/route-from-freepbx.png 653w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p>Với các thông tin sau:</p>
<ul>
<li>Route Name: Đặt tên route, From_FreePBX
</li>
<li>
<p>Call Source: Lựa chọn SPS-FreePBX</p>
</li>
<li>
<p>Call Destination: Chọn khe sim 2 (GSM2) đang kết nối.</p>
</li>
</ul>
<h2>4. Kiểm tra cuộc gọi</h2>
<p><strong>Step1</strong>: Cài đặt phần mềm VoIP</p>
<p>Tìm phần mềm nào hỗ trợ VoIP thì thực hiện cài đặt. Ở đây tôi dùng Zoiper thấy khá ổn, có cả bản trên mobile và computer.</p>
<p>Thực hiện thiết lập SIP account trên Zoiper với thông tin extension đã tạo trên FreePBX</p>
<p><img data-attachment-id="1796" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/register-sip-account/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/register-sip-account.png" data-orig-size="658,203" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="register-sip-account" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/register-sip-account.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/register-sip-account.png?w=614" class=" size-full wp-image-1796 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/register-sip-account.png?w=614" alt="register-sip-account" srcset="https://vnsys.files.wordpress.com/2019/03/register-sip-account.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/register-sip-account.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/register-sip-account.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/register-sip-account.png 658w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<p><strong>Step2</strong>: Kiểm tra cuộc gọi vào</p>
<p>Sử dụng mobile gắn sim và thực hiện cuộc gọi vào số gắn trên GSM2. Khi đó kiểm tra trên thiết bị cài đặt extension 100</p>
<p><img data-attachment-id="1797" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/test-incoming-call/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/test-incoming-call.png" data-orig-size="238,346" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="test-incoming-call" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/test-incoming-call.png?w=206" data-large-file="https://vnsys.files.wordpress.com/2019/03/test-incoming-call.png?w=238" class=" size-full wp-image-1797 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/test-incoming-call.png?w=614" alt="test-incoming-call" srcset="https://vnsys.files.wordpress.com/2019/03/test-incoming-call.png 238w, https://vnsys.files.wordpress.com/2019/03/test-incoming-call.png?w=103 103w" sizes="(max-width: 238px) 100vw, 238px"   /></p>
<p>Khi đó nhận được cuộc gọi từ số mobile hiện</p>
<p><strong>Step3</strong>: Kiểm tra cuộc gọi ra</p>
<p>Từ thiết bị mà cài đặt extension, thực hiện gọi ra một số mobile</p>
<p><img data-attachment-id="1798" data-permalink="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/test-outgoing-call/" data-orig-file="https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png" data-orig-size="840,584" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="test-outgoing-call" data-image-description="" data-medium-file="https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=300" data-large-file="https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=614" class=" size-full wp-image-1798 aligncenter" src="https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=614" alt="test-outgoing-call" srcset="https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=614 614w, https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=150 150w, https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=300 300w, https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png?w=768 768w, https://vnsys.files.wordpress.com/2019/03/test-outgoing-call.png 840w" sizes="(max-width: 614px) 100vw, 614px"   /></p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Chia sẻ:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-1782" class="share-twitter sd-button share-icon" href="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/?share=twitter" target="_blank" title="Nhấn để chia sẻ trên Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-1782" class="share-facebook sd-button share-icon" href="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li><li class="share-telegram"><a rel="nofollow noopener noreferrer" data-shared="" class="share-telegram sd-button share-icon" href="https://vnsys.wordpress.com/2019/03/17/thiet-lap-gsm-gateway-va-freepbx/?share=telegram" target="_blank" title="Click to share on Telegram"><span>Telegram</span></a></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-91768504-1782-5e140493d281f' data-src='//widgets.wp.com/likes/index.html?ver=20190321#blog_id=91768504&amp;post_id=1782&amp;origin=vnsys.wordpress.com&amp;obj_id=91768504-1782-5e140493d281f' data-name='like-post-frame-91768504-1782-5e140493d281f'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height: 55px;'><span class='button'><span>Số lượt thích</span></span> <span class="loading">Đang tải...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div></div>
		</div>
			
			
		</div><!-- #content-inner -->

		<div id="nav-post">
			<div class="navigation-bott">
								<div class="leftnav"><a href="https://vnsys.wordpress.com/page/2/" >Older Entries</a></div>
							</div>
		</div>
	</div><!-- #content -->

			<hr />

			<div id="footer" role="contentinfo">

				
					<div id="footer-left" class="widget-area">
						<ul>
												</ul>
					</div>

					<div id="footer-middle" class="widget-area">
						<ul>
						<li id="blog_subscription-9" class="widget widget_blog_subscription jetpack_subscription_widget"><h4 class="footerwidget"><label for="subscribe-field">Follow Blog via Email</label></h4>
            <form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8"
                  id="subscribe-blog">
									<p>Enter your email address to follow this blog and receive notifications of new posts by email.</p>
<p>Join 413 other followers</p>
                    <p><input type="text" name="email" style="width: 95%; padding: 1px 2px"
                              placeholder="Enter your email address" value=""
                              id="subscribe-field"/></p>
				
                <p>
                    <input type="hidden" name="action" value="subscribe"/>
                    <input type="hidden" name="blog_id" value="91768504"/>
                    <input type="hidden" name="source" value="https://vnsys.wordpress.com/"/>
                    <input type="hidden" name="sub-type" value="widget"/>
                    <input type="hidden" name="redirect_fragment" value="blog_subscription-9"/>
					<input type="hidden" id="_wpnonce" name="_wpnonce" value="b862b1d63e" />                    <button type="submit"
	                    		                	                >
	                    Theo dõi                    </button>
                </p>
            </form>
			
</li>						</ul>
					</div>

					<div id="footer-right" class="widget-area">
						<ul>
												</ul>
					</div>

				
			</div>

		</div><!-- #container -->
	</div><!-- #page -->

	<div id="footer-bott">
		<a href="https://vi.wordpress.com/?ref=footer_custom_svg" title="Create a website or blog at WordPress.com" rel="nofollow"><svg style="fill: currentColor; position: relative; top: 1px;" width="14px" height="15px" viewBox="0 0 14 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-labelledby="title" role="img">
				<desc id="title">Create a website or blog at WordPress.com</desc>
				<path d="M12.5225848,4.97949746 C13.0138466,5.87586309 13.2934037,6.90452431 13.2934037,7.99874074 C13.2934037,10.3205803 12.0351007,12.3476807 10.1640538,13.4385638 L12.0862862,7.88081544 C12.4453251,6.98296834 12.5648813,6.26504621 12.5648813,5.62667922 C12.5648813,5.39497674 12.549622,5.17994084 12.5225848,4.97949746 L12.5225848,4.97949746 Z M7.86730089,5.04801561 C8.24619178,5.02808979 8.58760099,4.98823815 8.58760099,4.98823815 C8.9267139,4.94809022 8.88671369,4.44972248 8.54745263,4.46957423 C8.54745263,4.46957423 7.52803983,4.54957381 6.86996227,4.54957381 C6.25158863,4.54957381 5.21247202,4.46957423 5.21247202,4.46957423 C4.87306282,4.44972248 4.83328483,4.96816418 5.17254589,4.98823815 C5.17254589,4.98823815 5.49358462,5.02808979 5.83269753,5.04801561 L6.81314716,7.73459399 L5.43565839,11.8651647 L3.14394256,5.04801561 C3.52312975,5.02808979 3.86416859,4.98823815 3.86416859,4.98823815 C4.20305928,4.94809022 4.16305906,4.44972248 3.82394616,4.46957423 C3.82394616,4.46957423 2.80475558,4.54957381 2.14660395,4.54957381 C2.02852925,4.54957381 1.88934333,4.54668493 1.74156477,4.54194422 C2.86690406,2.83350881 4.80113651,1.70529256 6.99996296,1.70529256 C8.638342,1.70529256 10.1302017,2.33173369 11.2498373,3.35765419 C11.222726,3.35602457 11.1962815,3.35261718 11.1683554,3.35261718 C10.5501299,3.35261718 10.1114609,3.89113285 10.1114609,4.46957423 C10.1114609,4.98823815 10.4107217,5.42705065 10.7296864,5.94564049 C10.969021,6.36482346 11.248578,6.90326506 11.248578,7.68133501 C11.248578,8.21992476 11.0413918,8.84503256 10.7696866,9.71584277 L10.1417574,11.8132391 L7.86730089,5.04801561 Z M6.99996296,14.2927074 C6.38218192,14.2927074 5.78595654,14.2021153 5.22195356,14.0362644 L7.11048207,8.54925635 L9.04486267,13.8491542 C9.05760348,13.8802652 9.07323319,13.9089317 9.08989995,13.9358945 C8.43574834,14.1661896 7.73285573,14.2927074 6.99996296,14.2927074 L6.99996296,14.2927074 Z M0.706448182,7.99874074 C0.706448182,7.08630113 0.902152921,6.22015756 1.25141403,5.43749503 L4.25357806,13.6627848 C2.15393732,12.6427902 0.706448182,10.4898387 0.706448182,7.99874074 L0.706448182,7.99874074 Z M6.99996296,0.999 C3.14016476,0.999 0,4.13905746 0,7.99874074 C0,11.8585722 3.14016476,14.999 6.99996296,14.999 C10.8596871,14.999 14,11.8585722 14,7.99874074 C14,4.13905746 10.8596871,0.999 6.99996296,0.999 L6.99996296,0.999 Z" id="wordpress-logo-simplified-cmyk" stroke="none" fill=“currentColor” fill-rule="evenodd"></path>
			</svg></a>	</div>

	<div class="footerbar"></div>
</div><!-- #wrapper -->

		<script type="text/javascript">
		//<![CDATA[
		var infiniteScroll = JSON.parse( decodeURIComponent( '%7B%22settings%22%3A%7B%22id%22%3A%22content-inner%22%2C%22ajaxurl%22%3A%22https%3A%5C%2F%5C%2Fvnsys.wordpress.com%5C%2F%3Finfinity%3Dscrolling%22%2C%22type%22%3A%22click%22%2C%22wrapper%22%3Atrue%2C%22wrapper_class%22%3A%22infinite-wrap%22%2C%22footer%22%3Atrue%2C%22click_handle%22%3A%221%22%2C%22text%22%3A%22B%5Cu00e0i%20c%5Cu0169%20h%5Cu01a1n%22%2C%22totop%22%3A%22Scroll%20back%20to%20top%22%2C%22currentday%22%3A%2217.03.19%22%2C%22order%22%3A%22DESC%22%2C%22scripts%22%3A%5B%5D%2C%22styles%22%3A%5B%5D%2C%22google_analytics%22%3Afalse%2C%22offset%22%3A0%2C%22history%22%3A%7B%22host%22%3A%22vnsys.wordpress.com%22%2C%22path%22%3A%22%5C%2Fpage%5C%2F%25d%5C%2F%22%2C%22use_trailing_slashes%22%3Atrue%2C%22parameters%22%3A%22%22%7D%2C%22query_args%22%3A%7B%22error%22%3A%22%22%2C%22m%22%3A%22%22%2C%22p%22%3A0%2C%22post_parent%22%3A%22%22%2C%22subpost%22%3A%22%22%2C%22subpost_id%22%3A%22%22%2C%22attachment%22%3A%22%22%2C%22attachment_id%22%3A0%2C%22name%22%3A%22%22%2C%22pagename%22%3A%22%22%2C%22page_id%22%3A0%2C%22second%22%3A%22%22%2C%22minute%22%3A%22%22%2C%22hour%22%3A%22%22%2C%22day%22%3A0%2C%22monthnum%22%3A0%2C%22year%22%3A0%2C%22w%22%3A0%2C%22category_name%22%3A%22%22%2C%22tag%22%3A%22%22%2C%22cat%22%3A%22%22%2C%22tag_id%22%3A%22%22%2C%22author%22%3A%22%22%2C%22author_name%22%3A%22%22%2C%22feed%22%3A%22%22%2C%22tb%22%3A%22%22%2C%22paged%22%3A0%2C%22meta_key%22%3A%22%22%2C%22meta_value%22%3A%22%22%2C%22preview%22%3A%22%22%2C%22s%22%3A%22%22%2C%22sentence%22%3A%22%22%2C%22title%22%3A%22%22%2C%22fields%22%3A%22%22%2C%22menu_order%22%3A%22%22%2C%22embed%22%3A%22%22%2C%22category__in%22%3A%5B%5D%2C%22category__not_in%22%3A%5B%5D%2C%22category__and%22%3A%5B%5D%2C%22post__in%22%3A%5B%5D%2C%22post__not_in%22%3A%5B%5D%2C%22post_name__in%22%3A%5B%5D%2C%22tag__in%22%3A%5B%5D%2C%22tag__not_in%22%3A%5B%5D%2C%22tag__and%22%3A%5B%5D%2C%22tag_slug__in%22%3A%5B%5D%2C%22tag_slug__and%22%3A%5B%5D%2C%22post_parent__in%22%3A%5B%5D%2C%22post_parent__not_in%22%3A%5B%5D%2C%22author__in%22%3A%5B%5D%2C%22author__not_in%22%3A%5B%5D%2C%22posts_per_page%22%3A5%2C%22ignore_sticky_posts%22%3Afalse%2C%22suppress_filters%22%3Afalse%2C%22cache_results%22%3Afalse%2C%22update_post_term_cache%22%3Atrue%2C%22lazy_load_term_meta%22%3Atrue%2C%22update_post_meta_cache%22%3Atrue%2C%22post_type%22%3A%22%22%2C%22nopaging%22%3Afalse%2C%22comments_per_page%22%3A%2250%22%2C%22no_found_rows%22%3Afalse%2C%22order%22%3A%22DESC%22%7D%2C%22last_post_date%22%3A%222019-03-17%2021%3A29%3A23%22%2C%22stats%22%3A%22blog%3D91768504%26v%3Dwpcom%26tz%3D7%26user_id%3D0%26subd%3Dvnsys%26x_pagetype%3Dinfinite-click%22%7D%7D' ) );
		//]]>
		</script>
		<!--  -->
	<div style="display:none">
	</div>
<script>
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"\u0110\u0103ng b\u00ecnh lu\u1eadn\u2026","postCommentText":"G\u1eedi b\u00ecnh lu\u1eadn","connectingToText":"Connecting to %s","commentingAsText":"%1$s: B\u1ea1n \u0111ang b\u00ecnh lu\u1eadn b\u1eb1ng t\u00e0i kho\u1ea3n %2$s","logoutText":"\u0110i ra kh\u1ecfi nh\u00e0 THchansan","loginText":"\u0110\u0103ng nh\u1eadp","connectURL":"https:\/\/vnsys.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/vnsys.wordpress.com\/wp-login.php?action=logout&_wpnonce=28be797b6d","homeURL":"https:\/\/vnsys.wordpress.com\/","postID":"1835","gravDefault":"mystery","enterACommentError":"Please enter a comment","enterEmailError":"Xin vui l\u00f2ng \u0111i\u1ec1n \u0111\u1ecba ch\u1ec9 email c\u1ee7a b\u1ea1n","invalidEmailError":"Invalid email address","enterAuthorError":"Xin vui l\u00f2ng \u0111i\u1ec1n t\u00ean c\u1ee7a b\u1ea1n","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"\u0110\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng th\u00f4ng tin t\u1eeb c\u00e1c t\u00e0i kho\u1ea3n sau","change":"Thay \u0111\u1ed5i","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1573483029j'></script>
			<!-- CCPA [start] -->
			<script type="text/javascript">
				( function () {

					var setupPrivacy = function() {

						var $ = window.jQuery;
						if ( ! $ ) return; // jQuery required

						$( document ).ready( function() {

							// Minimal Mozilla Cookie library
							// https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework
							var cookieLib = {getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,o,n,t,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}return"rootDomain"!==r&&".rootDomain"!==r||(r=(".rootDomain"===r?".":"")+document.location.hostname.split(".").slice(-2).join(".")),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+c+(r?"; domain="+r:"")+(t?"; path="+t:"")+(i?"; secure":""),!0}};

							var setDefaultOptInCookie = function() {
								var value = '1YNN';
								cookieLib.setItem( 'usprivacy', value, 365 * 24 * 60 * 60, '/', '.rootDomain' );
							};

							var setCcpaAppliesCookie = function( value ) {
								cookieLib.setItem( 'ccpa_applies', value, 24 * 60 * 60, '/', '.rootDomain' );
							}

							var maybeCallDoNotSellCallback = function() {
								if ( 'function' === typeof window.doNotSellCallback ) {
									return window.doNotSellCallback( $ );
								}

								return false;
							}

							var usprivacyCookie = cookieLib.getItem( 'usprivacy' );

							if ( null !== usprivacyCookie ) {
								maybeCallDoNotSellCallback();
								return;
							}

							var ccpaCookie = cookieLib.getItem( 'ccpa_applies' );

							if ( null === ccpaCookie ) {
								$.ajax({
									type: 'GET',
									dataType: "json",
									cache: false,
									url: 'https://public-api.wordpress.com/geo/',
									success: function( data ) {
										var ccpa_applies = data['region'] && data['region'].toLowerCase() === 'california';

										setCcpaAppliesCookie( ccpa_applies );

										if ( ccpa_applies ) {
											if ( maybeCallDoNotSellCallback() ) {
												setDefaultOptInCookie();
											}
										}
									},
									error: function() {
										setCcpaAppliesCookie( true );
										if ( maybeCallDoNotSellCallback() ) {
											setDefaultOptInCookie();
										}
									},
								} );
							} else {
								if ( ccpaCookie === 'true' ) {
									if ( maybeCallDoNotSellCallback() ) {
										setDefaultOptInCookie();
									}
								}
							}
						} );
					};

					if ( window.defQueue && defQueue.isLOHP && defQueue.isLOHP === 2020 ) {
						defQueue.items.push( setupPrivacy );
					} else {
						setupPrivacy();
					}

				} )();
			</script>
			<!-- CCPA [end] -->
					<script type="text/javascript">
			( function( $ ) {
				$( document.body ).on( 'post-load', function () {
					if ( typeof __ATA.insertInlineAds === 'function' ) {
						__ATA.insertInlineAds();
					}
				} );
			} )( jQuery );
			</script>
	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/vnsys.wordpress.com\/2020\/01\/05\/monitoring-network-voi-prometheus-grafana\/":1835,"https:\/\/vnsys.wordpress.com\/2019\/11\/03\/redis-cluster-voi-nhieu-master-node\/":1827,"https:\/\/vnsys.wordpress.com\/2019\/10\/31\/ve-nginx-caching\/":1823,"https:\/\/vnsys.wordpress.com\/2019\/04\/19\/trien-khai-he-thong-mongo-shake\/":1809,"https:\/\/vnsys.wordpress.com\/2019\/03\/17\/thiet-lap-gsm-gateway-va-freepbx\/":1782};
	</script>
				
	<div id="carousel-reblog-box">
		<form action="#" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="#" class="cancel">Hủy bỏ</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post" />
				<input type="hidden" id="carousel-reblog-blog-id" value="91768504" />
				<input type="hidden" id="carousel-reblog-blog-url" value="https://vnsys.wordpress.com" />
				<input type="hidden" id="carousel-reblog-blog-title" value="vnsys" />
				<input type="hidden" id="carousel-reblog-post-url" value="" />
				<input type="hidden" id="carousel-reblog-post-title" value="" />
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="22499de526" /><input type="hidden" name="_wp_http_referer" value="/" />		</form>

		<div class="arrow"></div>
	</div>
<div class="widget widget_eu_cookie_law_widget"><div
	class="hide-on-button ads-active"
	data-hide-timeout="30"
	data-consent-expiration="180"
	id="eu-cookie-law"
>
	<form method="post">
		<input type="submit" value="Close and accept" class="accept" />

		Privacy &amp; Cookies: This site uses cookies. By continuing to use this website, you agree to their use. <br />
To find out more, including how to control cookies, see here:
		<a href="https://automattic.com/cookies" >
			Cookie Policy		</a>
 </form>
</div>
</div><script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMAxpon2traGpuYGRgYmlhmgUAFLxAeg=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<link rel='stylesheet' id='all-css-0-3' href='https://s0.wp.com/_static/??-eJx9jk0KwjAQhS/kOCjY6EI8S5qOIe00CZMJ0tsbQYsu7O798D0ePjK4FJWiYubqQyzoa7M9iYeek5sKjqTZugnYLqkqeAkDvqu7NHjvStnh19JcYR2jSBJa8Udusc5KqoV4PfAJtiANTAN4y0yy/LoXdpuvh5PpjuZ86cz4BPPLYAE=?cssminify=yes' type='text/css' media='all' />
<script>
var actionbardata = {"siteID":"91768504","siteName":"vnsys","siteURL":"http:\/\/vnsys.wordpress.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/9c3a09732d629d2efd20646cb34ed1ce?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/greyzed","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fvnsys.wordpress.com%2F2020%2F01%2F05%2Fmonitoring-network-voi-prometheus-grafana%2F&signup_flow=account","themeURL":"","xhrURL":"https:\/\/vnsys.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"7f913efda9","isSingular":"","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"b862b1d63e\" \/>","referer":"https:\/\/vnsys.wordpress.com\/","canFollow":"1","feedID":"35856746","statusMessage":"","customizeLink":"https:\/\/vnsys.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fvnsys.wordpress.com%2F","i18n":{"view":"View site","follow":"Theo d\u00f5i","following":"Following","edit":"Edit","login":"\u0110\u0103ng nh\u1eadp","signup":"\u0110\u0103ng k\u00fd","customize":"T\u00f9y ch\u1ec9nh","report":"Report this content","themeInfo":"Get theme: Greyzed","shortlink":"Copy shortlink","copied":"\u0110\u00e3 sao ch\u00e9p","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/read\">Reader<\/a>","foldBar":"M\u1edf r\u1ed9ng","unfoldBar":"Expand this bar","editSubs":"Qu\u1ea3n l\u00fd s\u1ef1 \u0111\u0103ng k\u00ed theo d\u00f5i","viewReader":"Xem trang v\u1edbi t\u01b0 c\u00e1ch ng\u01b0\u1eddi \u0111\u1ecdc","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 413 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fvnsys.wordpress.com%2F2020%2F01%2F05%2Fmonitoring-network-voi-prometheus-grafana%2F&signup_flow=account\">Log in now.<\/a>","stats":"Th\u1ed1ng k\u00ea"}};
</script>
<script>
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"vi","ajaxurl":"https:\/\/vnsys.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"97fc010f48","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"B\u00ecnh lu\u1eadn","post_comment":"G\u1eedi b\u00ecnh lu\u1eadn","write_comment":"Write a Comment...","loading_comments":"\u0110ang t\u1ea3i B\u00ecnh lu\u1eadn...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"0","login_url":"https:\/\/vnsys.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fvnsys.wordpress.com%2F2019%2F04%2F19%2Ftrien-khai-he-thong-mongo-shake%2F","blog_id":"91768504","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Th\u01b0 \u0111i\u1ec7n t\u1eed<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">T\u00ean<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Trang web<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=91768504&v=wpcom&tz=7&user_id=0&subd=vnsys","is_public":"1","reblog_enabled":""};
</script>
<script>
var sharing_js_options = {"lang":"en","counts":"1","is_stats_active":"1"};
</script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJyVUttugzAM/aGFbJOq0odp3xKIoQaTsNiB9e9nNEBbtSLtKfaxz/EltvNo6hgEgtiOrYcJaxg/i46f7I/QkM1IucXAlrAHth8ZMlxd8ATpIBlDgwHlthtbLoaaslehpSiy2AmCj2kJjZFuDRIVA4Z76U23yUSGUcCAR8HQrhXtc/FSFq+2oqhQZGGjZt2vNRDmR4ptVreC1H4TtDGQ0dW9Ae1MND0H8XEOdg3fwQc7mNG3IMrIGo09giE3W4FhJCdwhx/oOK8LMZVLdnAskNQycYKUcNnjjv1TQZIOyUekWjCGhbRbB9m1SzEz0L6+Dfjr43luYtVBLY8+ZdLRonXMy/661R8T8FHDggTetI70NG+/vQPWciymIYfJ8tUlPantVdL78PZyOp8vp/JSlt0X1XM0vQ=='></script>
<script type='text/javascript'>
( 'fetch' in window ) || document.write( '<script src="https://s0.wp.com/wp-includes/js/dist/vendor/wp-polyfill-fetch.min.js?m=1573572739h&#038;ver=3.0.0"></scr' + 'ipt>' );( document.contains ) || document.write( '<script src="https://s1.wp.com/wp-includes/js/dist/vendor/wp-polyfill-node-contains.min.js?m=1540208548h&#038;ver=3.26.0-0"></scr' + 'ipt>' );( window.FormData && window.FormData.prototype.keys ) || document.write( '<script src="https://s1.wp.com/wp-includes/js/dist/vendor/wp-polyfill-formdata.min.js?m=1550600082h&#038;ver=3.0.12"></scr' + 'ipt>' );( Element.prototype.matches && Element.prototype.closest ) || document.write( '<script src="https://s2.wp.com/wp-includes/js/dist/vendor/wp-polyfill-element-closest.min.js?m=1540208548h&#038;ver=2.0.2"></scr' + 'ipt>' );
</script>
<script type='text/javascript'>
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-telegram', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtelegram', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
</script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script type="text/javascript">
			jQuery.extend( infiniteScroll.settings.scripts, ["jquery-core","jquery-migrate","jquery","postmessage","mobile-useragent-info","jquery_inview","jetpack_resize","spin","jquery.spin","jquery.autoresize","highlander-comments","syntaxhighlighter-core","syntaxhighlighter-brush-plain","devicepx","jetpack_likes_queuehandler","the-neverending-homepage","wp-polyfill","blog-posts-block-view","event-countdown-js","eu-cookie-law-script","wpcom-masterbar-js","wpcom-masterbar-tracks-js","wpcom-actionbar-bar","jetpack-carousel","swfobject","videopress","tiled-gallery","sharing-js"] );
			jQuery.extend( infiniteScroll.settings.styles, ["wpcom-smileys","wordads-global","wordads-greyzed","jetpack_likes","the-neverending-homepage","wp-block-library","jetpack-event-countdown","jetpack-layout-grid","jetpack-ratings","jetpack-timeline","blog-posts-block-view","coblocks-frontend","posts-list-block-style","wpcom-core-compat-playlist-styles","wpcom-bbpress2-staff-css","greyzed","eu-cookie-law-style","jetpack_social_media_icons_widget","noticons","geo-location-flair","reblogging","a8c-global-print","wpcom-actionbar-bar","jetpack-global-styles-frontend-style","sharedaddy","social-logos","h4-global","highlander-comments","highlander-comments-ie7","wpcom-layout-grid-front","genericons","jetpack-carousel","tiled-gallery"] );
		</script>		<iframe src='https://widgets.wp.com/likes/master.html?ver=20190321#ver=20190321&amp;lang=vi' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
		<div id='likes-other-gravatars'><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
<script src="//stats.wp.com/w.js?60" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'91768504','blog_tz':'7','user_lang':'vi','blog_lang':'vi','user_id':'0'}]);
_stq.push(['view', {'blog':'91768504','v':'wpcom','tz':'7','user_id':'0','subd':'vnsys'}]);
_stq.push(['extra', {'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhRWXNzXz01bj9hWHNfdHVDZThiTGsyUlpJb3Y1PzNTcT1MYVJXSnJWLDVVT0RiQismRTJxRGhHUERVNkpNZTUyL1NzaGszcj1IMFFtU2wzSTZ4bUx+YzVlblZJaTJueUolP1ZzT2NSMVlTeT10cjBYfmFqJl9PbVY/Wnw5alpxbl9QfkNTd2dpWW9BR1lRMF1qQnBWNzBzbU5BYWdxa01bQVctU0dIY1FBPy9YJSZ+VFdNNj9Ra0t1RzM3dEJoWVN8b1JESUQtaDhkenVRUl8xNkRWbVhCREJFP3lId3BjSnpzR1s1djZHcWtYUEdSYz1IfjZ2VXo0ejl6fHxpOFo='}]);
_stq.push([ 'clickTrackerInit', '91768504', '0' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>
